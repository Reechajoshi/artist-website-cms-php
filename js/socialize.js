
//server injected code
// Debug info: server: WEB514, utc_time: 2013-10-29 20:26:39.283, src_ip: 217.243.192.111, method: HTTP/GET, api key: 2_Y82PzwJ_chSFImHXaIDJClnLyJzmk-VFOavSsaNTzl6m901s_NNxRAS0xJ3bd3_N, site found?: True
if (typeof gigya == 'undefined' || !gigya.isGigya) { gigya = { isGigya: true } };
gigya.env='prod';
gigya.gaeDomain='chat.gigya.com';
gigya.build={version:'2.21.9',time:'Wed 10/23/2013 16:59:59.92'};
if (typeof gigya.partnerSettings == 'undefined') {
    gigya.partnerSettings={authMode:'cookie',baseDomains:'appspot.com,gigya.com,phpdemos.gigyahosting1.com,*gigya.com'};
    gigya.partnerSettings.plugins={"apiDomain":"US1.gigya.com"};
}
//end server injected code
"undefined"!=typeof gigya&&gigya.isGigya||(gigya={isGigya:!0});"undefined"==typeof gigya.partnerSettings&&(gigya.partnerSettings={authMode:"cookie",baseDomain:"",plugins:{apiDomain:"us1.gigya.com"}});"undefined"==typeof gigya.build&&(gigya.build={version:"local",time:(new Date).getTime()});
"object"==typeof gigya&&!0==gigya.loaded&&"object"==typeof console&&console.warn?console.warn("**** Socialize.js loaded twice ****"):function(){gigya.loaded=!0;gigya.socialize={};gigya.gcs={};gigya.gm={};gigya.comments={};gigya.accounts={};gigya.global={};gigya.defaultEventMaps||(gigya.defaultEventMaps=[]);var r=navigator.userAgent.toLowerCase(),w=gigya,x=new Date,y=document.location.href.split("?")[0].split("#")[0].split("/")[2].split(":")[0],z=-1!=r.indexOf("win"),A=-1!=r.indexOf("msie"),B=-1!=
r.indexOf("msie 6."),C=-1!=r.indexOf("msie 7."),D=-1!=r.indexOf("msie 8."),E=-1!=r.indexOf("msie 9."),F=-1!=r.indexOf("iphone")||-1!=r.indexOf("ipad"),u;u=-1!=r.indexOf("applewebkit")&&-1!=r.indexOf("version/")?parseInt(r.split("version/")[1].split(" ")[0]):0;w.localInfo={initTime:x,version:0,pageDomain:y,userAgent:r,isWin:z,isIE:A,isIE6:B,isIE7:C,isIE8:D,isIE9:E,isIOS:F,iosVersion:u,isChrome:-1!=r.indexOf("chrome"),isFF:-1!=r.indexOf("firefox"),isOpera:-1!=r.indexOf("opera"),isSafari:navigator.appVersion&&
-1!=navigator.appVersion.toLowerCase().indexOf("safari")&&-1==navigator.appVersion.toLowerCase().indexOf("chrome"),isMAC:navigator.appVersion&&-1!=navigator.appVersion.toLowerCase().indexOf("mac")?!0:!1,isWindowsPhone:-1!=r.indexOf("windows phone"),supportsPostMessage:null!=window.postMessage&&-1==r.indexOf("msie"),supportsLocalStorage:null!=window.localStorage,quirksMode:"BackCompat"==document.compatMode&&-1!=r.indexOf("msie"),backCompat:"BackCompat"==document.compatMode,isMobile:function(){var a=
"iphone;android;midp;240x320;blackberry;netfront;nokia;panasonic;portalmmm;sharp;sie-;sonyericsson;symbian;windows ce;benq;mda;mot-;opera mini;philips;pocket pc;sagem;samsung".split(";"),b;for(b in a)if(-1!=r.indexOf(a[b]))return!0;return!1}()};(function(){var a=gigya.partnerSettings.baseDomains;if(a&&!gigya.partnerSettings.baseDomain)for(var a=a.split(","),b=0;b<a.length;b++){var c=a[b],e=gigya.localInfo.pageDomain.indexOf(c);if(0<=e&&e==gigya.localInfo.pageDomain.length-c.length){gigya.partnerSettings.baseDomain=
c;break}}gigya.partnerSettings.baseDomain||(gigya.partnerSettings.baseDomain="")})();gigya.events={addMap:function(a){gigya.defaultEventMaps.splice(0,0,a)},global:{_eventHandlers:{},_pendingEvents:{},_activeNamespaces:{},add:function(a,b,c,e,d){a=d+"_"+a;c||(c="other");this._eventHandlers[a]||(this._eventHandlers[a]=[]);this._eventHandlers[a].push({handler:b,type:c,context:e});this._activeNamespaces[d]=1;if((b=gigya.events.global._pendingEvents[a])&&"other"==c)for(gigya.events.global._pendingEvents[a]=
[],c=0;c<b.length;c++)e=b[c],gigya.events.global.dispatch(e.eventObj,e.params)},remove:function(a){},dispatch:function(a,b){var c=a.isInternal,e=a.eventName.split(",");gigya.log.log('Dispatching global event "'+a.eventName+'" with this event object',a);for(var d=0;d<e.length;d++){var f=e[d].split("."),g=1<f.length?f.shift():"socialize",l=f[0],f="on"+l.substring(0,1).toUpperCase()+l.substring(1);(f=gigya.utils.object.clone(this._eventHandlers[g+"_"+f]))||(f=[]);var h=gigya.utils.object.clone(a);h.eventName=
l;b&&b.source&&(h.source=b.source);b&&b.sourceData&&(h.sourceData=b.sourceData);l=["component"];c||l.push("other");for(var p=0;p<l.length;p++)for(var k=l[p],q=0;q<f.length;q++){var m=f[q];if(m.type==k){var s=gigya.utils.object.clone(h);null==s.context&&null!=m.context&&(s.context=m.context);null==s.context&&delete s.context;"component"!=k&&n.handleSpecialFields(s);try{m.handler(s)}catch(t){gigya.log.log('Error while trying to invoke "'+a.eventName+'" global event handler',t)}}}c||gigya.events._dispatchFromMaps(h,
!0);c||("undefined"==typeof GenesisExchange_Gigya||"undefined"==typeof gigya_omniture_conf||"socialize"!=g)||((new GenesisExchange_Gigya(gigya_omniture_conf)).processAction(h),"undefined"!=typeof myOmnitureIntegrationFunc&&myOmnitureIntegrationFunc(gigya_omniture_conf,h))}},dispatchWhenHandlerAdded:function(a,b){var c=gigya.events.global._pendingEvents,e=a.eventName.split("."),d=1<e.length?e.shift():"socialize",e=e[0],e="on"+e.substring(0,1).toUpperCase()+e.substring(1),d=d+"_"+e;c[d]||(c[d]=[]);
c[d].push({eventObj:a,params:b})},getEventsForOperation:function(a){var b=[];-1!=a.toLowerCase().indexOf("login")?(this._activeNamespaces.socialize&&b.push("socialize.login"),this._activeNamespaces.accounts&&b.push("accounts.login")):"addConnection"==a&&this._activeNamespaces.socialize&&b.push("socialize.connectionAdded");return b.join(",")}},dispatchErrorFromResponse:function(a,b,c){b||(b={});var e=b;e.response&&(e=e.response);b={eventName:"error",status:e.status?e.status:"FAIL",statusMessage:e.statusMessage?
e.statusMessage:"General Server Error",errorMessage:e.errorMessage?e.errorMessage:"General Server Error",errorDetails:e.errorDetails?e.errorDetails:"",errorCode:e.errorCode?e.errorCode:500001,response:b};gigya.utils.object.add(b,c);gigya.events.dispatchForWidget(b,a)},dispatchInvalidParamError:function(a,b){var c={eventName:"error"};"undefined"==typeof a[b]||null==a[b]?(c.errorCode=400002,c.errorMessage="Missing_required_parameter ("+b+")"):(c.errorCode=400006,c.errorMessage="Invalid_parameter_value ("+
b+")");c.status=c.errorCode;c.statusMessage=c.errorMessage;this.dispatchForWidget(c,a)},dispatchForWidget:function(a,b){if(a&&a.eventName){var c=a.eventName;gigya.log.log('Dispatching widget event "'+c+'" for '+b.lastSource+" with this event object",a);var e="on"+c.substring(0,1).toUpperCase()+c.substring(1);n.handleSpecialFields(a);for(var d=a.eventName.split(","),f,g=0;g<d.length;g++){c=d[g];e="on"+c.substring(0,1).toUpperCase()+c.substring(1);b.context&&(a.context=b.context);b&&b.source&&(a.source=
b.source);b&&b.sourceData&&(a.sourceData=b.sourceData);try{"function"==typeof b[e]&&(f=b[e](a))}catch(l){}-1==c.indexOf("login")&&(-1==c.indexOf("logout")&&"connectionRemoved"!=c&&"connectionAdded"!=c)&&(this._dispatchFromMaps(a),"undefined"!=typeof GenesisExchange_Gigya&&"undefined"!=typeof gigya_omniture_conf&&((new GenesisExchange_Gigya(gigya_omniture_conf)).processAction(a),"undefined"!=typeof myOmnitureIntegrationFunc&&myOmnitureIntegrationFunc(gigya_omniture_conf,a)))}if(null!=f)return f}},
_dispatchFromMaps:function(a,b){for(var c=[],e=!1,d=0;d<gigya.defaultEventMaps.length;d++){for(var f=gigya.defaultEventMaps[d].eventMap,g=gigya.defaultEventMaps[d].defaultMethod,l=0;l<f.length;l++){var h=f[l],p=[];h.args||(h.args=[]);for(var k=0;k<h.args.length;k++)p.push(gigya.utils.templates.fill(h.args[k],a));h.events.split(",");k=","+h.events.toLowerCase()+",";-1==k.indexOf(",on"+a.eventName.toLowerCase()+",")&&-1==k.indexOf(","+a.eventName.toLowerCase()+",")||(a.source||h.sources)&&h.sources&&
-1==h.sources.indexOf(a.source)||(c.push(h),(h.method?h.method:g).apply(this,p),h.override&&(e=!0))}if(e)break}}};gigya.external={backplane:{_ready:null,executeOnInit:function(a,b){a&&(b||(b=2E3),gigya.external.backplane.isLoaded()?gigya.external.backplane.getChannelId()||gigya.external.backplane._ready?(gigya.external.backplane._ready=!0,a()):(window.setTimeout(function(){gigya.external.backplane._ready||(gigya.external.backplane._ready=!0,a())},b),Backplane(function(){gigya.external.backplane._ready=
!0;a()})):a())},isLoaded:function(){return"undefined"!=typeof Backplane},getChannelId:function(){if(gigya.external.backplane.isLoaded())return Backplane.getChannelID()},resetChannel:function(){gigya.external.backplane.isLoaded()&&Backplane.resetCookieChannel()}},facebook:{_pendingRequests:[],_initializedTime:null,isLoaded:function(){return null!=gigya.external.facebook._initializedTime&&0<gigya.external.facebook.gigya.external.facebook._initializedTime},isLoggedIn:!1,isConnected:!1,load:function(a){if(!gigya.external.facebook._initializedTime){gigya.external.facebook._initializedTime=
-1;window.setInterval(function(){gigya.external.facebook.refreshSession()},27E5);window.fbAsyncInit=function(){var b=gigya.utils.object.clone(gigya.thisScript.globalConf.facebookInitParams);b||(b={});b.appId=gigya.fbAppID;b.status=!1;b.cookie=!0;b.xfbml=!0;b.oauth=!0;FB.init(b);!0!=a?FB.getLoginStatus(function(a){gigya.external.facebook._initializedTime=(new Date).getTime();gigya.external.facebook.isConnected="connected"==a.status;gigya.external.facebook.isLoggedIn="unknown"!=a.status;gigya.events.global.dispatch({eventName:"facebookLoaded",
isLoggedIn:gigya.external.facebook.isLoggedIn,isConnected:gigya.external.facebook.isConnected});gigya.socialize.addEventHandlers({listenerType:"component"},{listenerDescription:"listener for updating Facebook Connect session",onLogin:function(){gigya.external.facebook.refreshSession()},onConnect:function(){gigya.external.facebook.refreshSession()},onLogout:function(){gigya.external.facebook.refreshSession()}})},!0):(gigya.external.facebook._initializedTime=(new Date).getTime(),gigya.events.global.dispatch({eventName:"facebookLoaded",
isLoggedIn:gigya.external.facebook.isLoggedIn,isConnected:gigya.external.facebook.isConnected}))};var b=document.createElement("div");b.id="fb-root";gigya.utils.DOM.appendToBody(b);gigya.utils.script.load(document.location.protocol+"//connect.facebook.net/"+gigya.thisScript.lang.full.replace("-","_")+"/all.js",null,function(){"none"==document.documentElement.style.display&&(document.documentElement.style.display="")},!0)}},refreshSession:function(){if("undefined"!=typeof FB){var a=function(a){gigya.external.facebook._initializedTime=
(new Date).getTime();gigya.external.facebook.isConnected="connected"==a.status;gigya.external.facebook.isLoggedIn="unknown"!=a.status;gigya.events.global.dispatch({eventName:"FBCRefreshed"})};gigya.fbAppID&&(FB&&FB.getLoginStatus)&&FB.getLoginStatus(a,!0)}},retryPending:function(){for(var a=gigya.external.facebook._pendingRequests,b=0;b<a.length;b++)a[b].cmd.run();gigya.external.facebook._pendingRequests=[]},addPending:function(a,b){gigya.external.facebook._pendingRequests.push({cmd:a,response:b})},
getParams:function(){var a={};if("undefined"!=typeof FB&&FB.getAuthResponse)try{var b=FB.getAuthResponse();b&&(null!=b.userID&&(a.fb_UID=b.userID),null!=b.accessToken&&(a.fb_at=b.accessToken),null!=b.expiresIn&&(a.fb_exp=b.expiresIn))}catch(c){}return a}},openGraph:{getMetaTag:function(a){for(var b=document.getElementsByTagName("meta"),c=0;c<b.length;c++)if(b[c].getAttribute("property")==a&&b[c].getAttribute("content"))return b[c].getAttribute("content")}}};gigya.utils={array:{indexOf:function(a,
b){for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1},clone:function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b},removeByProperty:function(a,b,c){if(a)for(var e=a.length-1;0<=e;e--)a[e][b]==c&&a.splice(e,1)}},delegate:{create:function(a,b){return function(){return b.apply(a,arguments)}}},templates:{fill:function(a,b){"function"==typeof a&&(a=a(b));a instanceof Array&&(a=a.join(""));var c=/(\$)(!?)([a-z_][a-z_.\d]*)([(][^()]*[)])?|(\$)(!?)\{([a-z_][a-z_.\d]*)([(][^()]*[)])?\}/gi;c.lastIndex=
0;for(var e=a,d=c.exec(e),f;null!=d;){f="$"==d[1]?0:4;var g="!"==d[2+f],l=d[3+f];f=d[4+f];null==f&&(f="");"."==l.substring(0,1)&&(l=l.substring(1));"DBG"==l.substring(0,3)&&(l=l.substring(3));var h="";for(f=l+f;f!=h;){var h=f,p=c.lastIndex;f=gigya.utils.templates.fill(h,b);c.lastIndex=p}h="";p=0;if(null!=b[l.split(".")[0]])try{h=(new Function("o","p",'return eval("o." + p)'))(b,f)}catch(k){}else h="$"+(g?"!":"")+f,p=1;e=g?e.replace(d[0],""):e.substr(0,d.index)+h+e.substr(d.index+d[0].length);c.lastIndex=
d.index+p;d=c.exec(e)}return e}},functions:{callFunction:function(a,b){var c=eval(a),e=a.split(".");e.splice(e.length-1,1);e=eval(e.join("."));c.apply(e,b)},invokeOnPageLoad:function(a,b){if(!document.readyState&&document.body||"loaded"==document.readyState||"complete"==document.readyState||!b&&"interactive"==document.readyState&&document.body)a();else{var c=!1,e=function(){c||(c=!0,a())};window.setTimeout(e,2E4);gigya.utils.DOM.addEventListener(window,"load",e);gigya.utils.DOM.addEventListener(document,
"DOMContentLoaded",e)}},makePublic:function(a,b){for(var c=a.split("."),e=window,d=0;d<c.length-1;d++){var f=c[d];e[f]||(e[f]={});e=e[f]}e[c[c.length-1]]=b}},window:{_openedWindows:{},open:function(a,b,c,e){if(gigya.localInfo.isIE&&2048<a.length||4096<a.length)gigya.utils.redirect(a.split("?")[0],[gigya.utils.URL.getParamsFromURL(a)],"POST","_blank");else{c||(c="menubar=0,toolbar=0,resizable=1,scrollbars=1,width=960,height=680");e=c;try{var d=c.split("width=")[1].split(",")[0],f=c.split("height=")[1].split(",")[0],
g=(screen.width-d)/2,l=(screen.height-f)/2;0>g&&(g=0);0>l&&(l=0);e+=",top="+l+",left="+g}catch(h){}(a=window.open(a,b,e))&&a.focus&&a.focus();this._openedWindows[b]=a}return null!=this._openedWindows[b]},close:function(a){if(null!=gigya.utils.window._openedWindows[a]){var b=function(){try{null!=gigya.utils.window._openedWindows[a]&&gigya.utils.window._openedWindows[a].close(),delete gigya.utils.window._openedWindows[a]}catch(b){}};6<=gigya.localInfo.iosVersion?b():window.setTimeout(b,10)}}},validation:{isExplicitTrue:function(a){a=
(""+a).toLowerCase();return"true"==a||"1"==a},isExplicitFalse:function(a){a=(""+a).toLowerCase();return"false"==a||"0"==a}},object:{removeUndefined:function(a){var b={},c;for(c in a)null!=a[c]&&void 0!=a[c]&&(b[c]=a[c]);return b},getPropertyBySerializedName:function(a,b,c){if(!b)return a;b=b.split(".");for(var e=0;e<b.length;e++){var d=b[e];c&&!a[d]&&(a[d]={});if(a[d])a=a[d];else return null}return a},setPropertyBySerializedName:function(a,b,c){b=b.split(".");var e=b.pop();this.getPropertyBySerializedName(a,
b.join("."),!0)[e]=c},add:function(a,b){for(var c in b)a[c]=b[c]},getHash:function(a){var b=[],c;for(c in a)b.push(c+"="+a[c]);return b.sort().join("&")},getMurmurHash:function(a,b){b||(b=0);var c,e,d,f,g;c=a.length&3;e=a.length-c;d=b;for(g=0;g<e;)f=a.charCodeAt(g)&255|(a.charCodeAt(++g)&255)<<8|(a.charCodeAt(++g)&255)<<16|(a.charCodeAt(++g)&255)<<24,++g,f=3432918353*(f&65535)+((3432918353*(f>>>16)&65535)<<16)&4294967295,f=f<<15|f>>>17,f=461845907*(f&65535)+((461845907*(f>>>16)&65535)<<16)&4294967295,
d^=f,d=d<<13|d>>>19,d=5*(d&65535)+((5*(d>>>16)&65535)<<16)&4294967295,d=(d&65535)+27492+(((d>>>16)+58964&65535)<<16);f=0;switch(c){case 3:f^=(a.charCodeAt(g+2)&255)<<16;case 2:f^=(a.charCodeAt(g+1)&255)<<8;case 1:f^=a.charCodeAt(g)&255,f=3432918353*(f&65535)+((3432918353*(f>>>16)&65535)<<16)&4294967295,f=f<<15|f>>>17,d^=461845907*(f&65535)+((461845907*(f>>>16)&65535)<<16)&4294967295}d^=a.length;d^=d>>>16;d=2246822507*(d&65535)+((2246822507*(d>>>16)&65535)<<16)&4294967295;d^=d>>>13;d=3266489909*(d&
65535)+((3266489909*(d>>>16)&65535)<<16)&4294967295;return(d^d>>>16)>>>0},clone:function(a,b,c,e,d,f){d||(d=0);if("undefined"==typeof a||null==a||"function"==typeof a&&c)return null;if(a.constructor==Array){for(var g=[],l=0;l<a.length;l++)c&&"function"==typeof a[l]||(g[l]=b?this.clone(a[l],b,c,e,d+1,f):a[l]);return g}if("object"==typeof a){g={};for(l in a)f&&"context"==l||c&&"function"==typeof a[l]||(g[l]=b?this.clone(a[l],b,c,e,d+1,f):a[l]);return g}return a},merge:function(a){for(var b={},c=0;c<
a.length;c++)if(a[c]&&a[c].length)for(var e=0;e<a[c].length;e++)for(var d in a[c][e])b[d]=a[c][e][d];else for(d in a[c])b[d]=a[c][d];return b},extractProperties:function(a,b,c){if(null!=a){null==b&&(b={});if(a.constructor==Array)for(var e=0;e<a.length;e++)this.extractProperties(a[e],b,c);else if(c){c=c.split("|");var d={};for(e in a)d[e.toLowerCase()]=1;for(var f=0;f<c.length;f++)e=c[f],d[e.toLowerCase()]&&(b[e]=a[e])}else b=gigya.utils.object.clone(a,!1);return b}},extractProperty:function(a,b){return this.extractProperties(a,
void 0,b)[b]}},cookie:{get:function(a){a=a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1").replace(/^[ \t]+|[ \t]+$/g,"");return(a=document.cookie.match(RegExp("(?:^|;)\\s?"+a+"=(.*?)(?:;|$)")))&&unescape(a[1])},set:function(a,b,c,e,d){var f=gigya.localInfo.pageDomain,g=gigya.partnerSettings.baseDomain;null==e&&(e=0<g.length&&f.length>=g.length&&f.lastIndexOf(g)==f.length-g.length?g:f);c=null==c||""==c?47304E7:0==c?null:1E3*c;f=new Date;f.setTime(f.getTime()+c);a=a+"="+escape(b)+(d?"":"; path=/")+(null==
c?"":"; expires="+f.toGMTString())+(e&&""!=e&&-1!=e.indexOf(".")?"; domain="+e:"");document.cookie=a},remove:function(a){var b=gigya.localInfo.pageDomain,c=gigya.partnerSettings.baseDomain;0<c.length&&(b.length>=c.length&&b.lastIndexOf(c)==b.length-c.length)&&(this.set(a,"",-1,c),this.set(a,"",-1,c,!0));this.set(a,"",-1,gigya.localInfo.pageDomain);this.set(a,"",-1,gigya.localInfo.pageDomain,!0);this.set(a,"",-1,"");this.set(a,"",-1,"",!0)}},sanitize:{sanitizeHTML:function(a){return null==a||"undefined"==
typeof a?a:a.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\"/g,"&#34;").replace(/'/g,"&#39;").replace(/&#38;#173;/g,"&#173;")},sanitizeAttribute:function(a){return null==a||"undefined"==typeof a?a:a.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\"/g,"&#34;").replace(/\=/g,"&#61;")}},JSON:{serialize:function(a,b,c,e){e||(e=0);if(10<e)return"[Too deep]";var d="",f="",g="";if(c)for(var g="\t",f="\n",l=0;l<e+1;l++)d+=g;var h=typeof a;if("function"==
h)return h.toString();if("object"!=h||null===a)return"string"==h&&(a='"'+a.replace(/\"/g,'\\"')+'"'),String(a);var p,k,n=[],m=a&&a.constructor==Array;if(m)for(l=0;l<a.length;l++)k=a[l],h=typeof k,null==k||"undefined"==h?k="":"string"==h?k='"'+k.replace(/\"/g,'\\"')+'"':"function"==h?k=b?"[Function]":"":k.parentNode&&k.innerHTML?k="[HTML Element]":k.constructor==Date?k="":"object"==h&&null!==k&&(k=this.serialize(k,b,c,e+1)),""!=String(k)&&n.push(d+g+String(k));else for(p in a)k=a[p],h=typeof k,null==
k||"undefined"==h?k=String(k):"string"==h?k='"'+k.replace(/\"/g,'\\"')+'"':"function"==h?k=b?"[Function]":"":k.parentNode&&k.innerHTML?k="[HTML Element]":k.constructor==Date?k="":"object"==h&&null!==k&&(k=f+this.serialize(k,b,c,e+1)),""!=String(k)&&n.push(d+g+'"'+p.replace(/\"/g,'\\"')+'":'+String(k));return f+d+(m?"[":"{")+f+n.join(","+f)+f+d+(m?"]":"}")},deserialize:function(a){""===a&&(a='""');eval("var o");try{eval("o="+a)}catch(b){}return o}},viewport:{getScroll:function(){var a=0,b=0;"number"==
typeof window.pageYOffset?(b=window.pageYOffset,a=window.pageXOffset):document.body&&(document.body.scrollLeft||document.body.scrollTop)?(b=document.body.scrollTop,a=document.body.scrollLeft):document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(b=document.documentElement.scrollTop,a=document.documentElement.scrollLeft);return{left:a,top:b}},getFullSize:function(){var a=document.documentElement,b=document.body,c=a.clientHeight;0==c&&(c=b.clientHeight);
a=a.clientWidth;0==a&&(a=b.clientWidth);return{w:a,h:c}},getInnerSize:function(){var a,b;b=document.documentElement;var c=document.body;window.innerHeight?(a=window.innerHeight,b=window.innerWidth):(a=b.clientHeight,0==a&&(a=c.clientHeight),b=b.clientWidth,0==b&&(b=c.clientWidth));return{w:b,h:a}},getMiddleCenter:function(){var a=this.getScroll(),b=this.getInnerSize();return{top:a.top+Math.floor(b.h/2),left:a.left+Math.floor(b.w/2)}}},mouse:{_mouseEventObject:null,_moveEvent:function(a){a||(a=window.event);
gigya.utils.mouse._mouseEventObject={clientX:a.clientX,clientY:a.clientY}},getPosition:function(){var a=0,b=0;if(document.body){var c=this._mouseEventObject;c||(c={clientX:0,clientY:0});if(c.pageX||c.pageY)a=c.pageX,b=c.pageY;else if(c.clientX||c.clientY)a=c.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,b=c.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{x:a,y:b}}}},localStorage:{setItem:function(a,b){},getItem:function(a){},removeItem:function(a){},
_getAllItems:function(){}},redirect:function(a,b,c,e){if(c&&"post"==c.toLowerCase()){var d=document.createElement("form"),f=[];d.setAttribute("accept-charset","UTF-8");d.setAttribute("method","POST");d.setAttribute("action",a);e&&d.setAttribute("target",e);c=gigya.utils.object.merge(b);for(var g in c)"boolean"!=typeof c[g]&&"string"!=typeof c[g]||"eventName"==g||f.push('<textarea name="'+encodeURIComponent(g)+'">'+c[g]+"</textarea>");d.innerHTML=f.join("");d.style.display="none";gigya.utils.DOM.appendToBody(d);
d.submit()}else{c=a.split("?");a=c[0];e={};if(1<c.length)for(c=c[1].split("&"),d=0;d<c.length;d++)f=c[d].split("="),e[decodeURIComponent(f[0])]=decodeURIComponent(f[1]);for(d=0;d<b.length;d++)for(g in c=b[d],c)"boolean"!=typeof c[g]&&"string"!=typeof c[g]||"eventName"==g||(e[g]=c[g]);b=[];for(g in e)b.push(g+"="+encodeURIComponent(e[g]));document.location.href=a+"?"+b.join("&")}},URL:{URLEncode:function(a){return encodeURIComponent(a)},URLDecode:function(a){return decodeURIComponent(a).replace(/\+/g,
" ")},getParamsFromURL:function(a,b){return-1==a.indexOf("?")?{}:gigya.utils.keyValue.deserialize(a.split("#")[0].split("?")[1],"&",b)},getParamValueFromURL:function(a,b,c){if(null==b||""==b)return c;var e=b.indexOf("?");if(-1==e)return c;e="&"+b.substr(e+1);b=e.toLowerCase().indexOf("&"+a.toLowerCase()+"=");if(-1==b)return c;a=e.substr(b+(1+a.length+1))+"&";b=a.indexOf("&");return a.substr(0,b)},addParamsToURL:function(a,b){var c=gigya.utils.URL.getParamsFromURL(a);gigya.utils.object.add(c,b);var e=
a.split("#"),c=e[0].split("?")[0]+"?"+gigya.utils.keyValue.serialize(c,"&");1<e.length&&(c+="#"+e[1]);return c}},keyValue:{serialize:function(a,b){var c=[];b||(b="&");for(var e in a)switch(typeof a[e]){case "function":break;case "array":case "object":null!=a[e]&&c.push(e+"="+gigya.utils.URL.URLEncode(gigya.utils.JSON.serialize(a[e])));break;case "undefined":break;default:c.push(e+"="+gigya.utils.URL.URLEncode(a[e]))}return c.join(b)},deserialize:function(a,b,c,e){var d={};if(!a)return d;b||(b="&");
a=a.split(b);for(b=0;b<a.length;b++){var f=a[b],g=f.indexOf("=");if(-1==g){var l=c?f.toLowerCase():f;d[l]="1"}else{l=f.substr(0,g);c&&(l=l.toLowerCase());f=f.substr(g+1).replace(/\+/g," ");try{d[l]=e?unescape(f):gigya.utils.URL.URLDecode(f)}catch(h){d[l]=unescape(f)}}}return d}},DOM:{_nextZIndex:999999999,_popupContainers:[],_pseudoContainers:[],_backListener:null,addEventListener:function(a,b,c){a&&c&&(window.addEventListener?a.addEventListener(b,c,!0):a.attachEvent("on"+b,c))},removeEventListener:function(a,
b,c){c&&(window.removeEventListener?a.removeEventListener(b,c,!0):a.detachEvent("on"+b,c))},addDialogBackListener:function(a){gigya.utils.DOM._removeDialogBackListener();var b=function(b){b&&(b.newURL&&-1==b.newURL.indexOf("|gigyaMobileDialog"))&&(a(b),gigya.utils.DOM._removeDialogBackListener())};gigya.utils.DOM._backListener=b;window.setTimeout(function(){-1==window.location.hash.indexOf("|gigyaMobileDialog")&&(window.location.hash+="|gigyaMobileDialog");gigya.utils.DOM.addEventListener(window,
"hashchange",b)},50)},_removeDialogBackListener:function(){var a=gigya.utils.DOM._backListener;a&&(gigya.utils.DOM.removeEventListener(window,"hashchange",a),gigya.utils.DOM._backListener=null,window.location.hash=window.location.hash.replace("|gigyaMobileDialog",""))},appendToBody:function(a){document.body&&(document.body.insertBefore&&document.body.firstChild?document.body.insertBefore(a,document.body.firstChild):document.body.appendChild(a))},removeElement:function(a){a.parentElement&&a.parentElement.removeChild(a)},
isVisible:function(a){if(!a||!a.parentNode||a.style&&"none"==a.style.display)return!1;if(a.parentNode)return gigya.utils.DOM.isVisible(a.parentNode)},createTopLevelDiv:function(a){var b=document.createElement("div");b.style.position="absolute";null!=b.style.zIndex&&(b.style.zIndex=this._nextZIndex++);a&&(b.id=a);this.appendToBody(b);return b},hideByID:function(a){if(a=document.getElementById(a))a.style.display="none"},showByID:function(a){if(a=document.getElementById(a))a.style.display=gigya.localInfo.isIE6?
"TD"==a.tagName?"table-cell":"TR"==a.tagName?"":"TABLE"==a.tagName?"":"block":""},clearByID:function(a){try{var b=document.getElementById(a);null!=b&&(b.innerHTML="")}catch(c){}},getHTMLSize:function(a,b){var c=document.createElement("div");c.style.position="absolute";c.style.left="-1000px";c.innerHTML=a;b.appendChild(c);var e=c.offsetWidth,d=c.offsetHeight;c.parentNode.removeChild(c);return{w:e,h:d}},getElementsByClass:function(a,b){if(!a)return[];for(var c=[],e=a.getElementsByTagName("*"),d=0;d<
e.length;d++){var f=e[d].className;if(f)for(var f=f.split(" "),g=0;g<f.length;g++)f[g]==b&&c.push(e[d])}return c||[]},getElementsByAttribute:function(a,b,c,e){var d=[];a=a.getElementsByTagName(b);for(b=0;b<a.length;b++)a[b].getAttribute(c)==e&&d.push(a[b]);return d},getElementPosition:function(a){if(!a)return{left:0,top:0};var b=curtop=0;if(a.offsetParent){do b+=a.offsetLeft,curtop+=a.offsetTop;while(a=a.offsetParent)}return{left:b,top:curtop}},addClassToElement:function(a,b){if(a){for(var c=!1,e=
a.className.split(" "),d=0;d<e.length;d++)if(e[d]==b){c=!0;break}c||(e.push(b),a.className=e.join(" "))}},removeClassFromElement:function(a,b){if(a){for(var c=a.className.split(" "),e=c.length-1;0<=e;e--)c[e]==b&&c.splice(e,1);a.className=c.join(" ")}},isElementClass:function(a,b){if(a){for(var c=!1,e=a.className.split(" "),d=0;d<e.length;d++)if(e[d]==b){c=!0;break}return c}},cancelEvent:function(a){a&&("cancelable"in a?a.preventDefault():a.returnValue=!1)},createElement:function(a,b){var c=document.createElement("div");
b=b||"";c.innerHTML="<"+a+' name="'+b+'" id="'+b+'"></'+a+">";return c.firstChild}},SSO:{_domain:document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2],_request:function(a,b){b=gigya.utils.object.clone(b);if(gigya.partnerSettings.ssoKey){var c=this._getIframe();b||(b={});var e=b.callback;b.callback=function(b){gigya.log.log("SSO: About to invoke callback for "+a+" with this response",b);e&&e(b)};b.m=a;b.d=this._domain;b.lid=gigya.utils.xd._flashListenerID;
b.legacyCrossSiteMethod&&"localstorage"!=b.legacyCrossSiteMethod.toLowerCase()&&(b.lid=b.legacyCrossSiteMethod+":"+gigya.utils.xd._flashListenerID);"function"==typeof b.callback&&(b.callbackID="gig_sso_cb"+(new Date).getTime(),gigya.utils.xd.addMessageListener(b.callbackID,{},b.callback),delete b.callback);b.sAPIKey=gigya.thisScript.APIKey;var d=gigya.utils.keyValue.serialize(b);c.src="https://cdns.gigya.com/gs/sso.htm?APIKey="+gigya.partnerSettings.ssoKey+"&version=1#"+(new Date).getTime()+"&"+d;
gigya.log.log("SSO: Calling "+a,{SSOKey:gigya.partnerSettings.ssoKey,params:b});document.body?gigya.utils.DOM.appendToBody(c):gigya.utils.functions.invokeOnPageLoad(function(){gigya.utils.DOM.appendToBody(c)})}else b&&b.callback&&b.callback()},_getIframe:function(){var a=document.getElementById("gig_sso");a||(a=document.createElement("iframe"),a.style.width="30px",a.style.height="10px",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.id="gig_sso");return a},getGroupToken:function(a){this._request("getToken",
a)},setGroupTokenFromResponse:function(a,b,c){a.sessionInfo&&(a=a.sessionInfo);var e=a.expires_in,e=null==e||""==e?47304E7:0==e?null:1E3*e,d=new Date;d.setTime(d.getTime()+e);gigya.utils.SSO.setGroupToken({lt:a.login_token,expiration:null==e?0:d.getTime(),legacyCrossSiteMethod:c,callback:b})},setGroupToken:function(a){this._request("setToken",a)},logout:function(a){this._request("logout",a)},removeGroupToken:function(a){this._request("removeToken",a)}},xd:{_listeners:{},_flashListenerID:"flid"+(new Date).getTime(),
_added:!1,_addedLegacyMethods:{},_onFlashMessage:function(a){a=gigya.utils.keyValue.deserialize(a,null,null,!0);var b=a.id,c=this._listeners[b];null!=c&&("function"==typeof c.callback&&c.callback(a,c.context),this.removeMessageListener(b))},_onMessage:function(a){var b=this,c=function(){var c=a.data.split("="),d=b._listeners[c[0]];if(null!=d){if("function"==typeof d.callback){var f=unescape(c[1]),f=gigya.utils.keyValue.deserialize(f,null,null,!0);d.callback(f,d.context)}b.removeMessageListener(c[0])}};
a&&(a.data&&a.data.split)&&(6<=gigya.localInfo.iosVersion?c():window.setTimeout(c,100))},addMessageListener:function(a,b,c){this._listeners[a]={callback:c,context:b,t:(new Date).getTime()};var e="localstorage";b&&(b.c&&b.c.legacyCrossSiteMethod&&"localstorage"!=b.c.legacyCrossSiteMethod.toLowerCase())&&(e=b.c.legacyCrossSiteMethod);var d=this;gigya.localInfo.supportsPostMessage?this._added||(window.addEventListener?window.addEventListener("message",function(a){d._onMessage(a)},!1):window.attachEvent&&
window.attachEvent("onmessage",function(a){d._onMessage(a)}),this._added=!0):gigya.utils.xd._addedLegacyMethods[e]||window.setTimeout(function(){var a=document.createElement("div");a.style.width="1px";a.style.height="1px";a.style.overflow="hidden";a.style.position="absolute";a.style.left="-1000px";var c=gigya.utils.xd._flashListenerID;"localstorage"!=e&&(c=b.c.legacyCrossSiteMethod+":"+gigya.utils.xd._flashListenerID);var d=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2],
h=(new Date).getTime(),p=document.createElement("object");with(p)setAttribute("id","eventsBroadcaster"+h),setAttribute("codebase","https://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0"),setAttribute("width","50"),setAttribute("height","50"),setAttribute("src","https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf");h=document.createElement("param");h.name="movie";h.setAttribute("value","https://cdns.gigya.com/GS/swf/eventsBroadcaster2.swf");p.appendChild(h);h=document.createElement("param");
h.setAttribute("name","allowScriptAccess");h.setAttribute("value","always");p.appendChild(h);h=document.createElement("param");h.setAttribute("name","FlashVars");h.setAttribute("value","action=listen&id="+c+"&eventName=loginComplete&callback=gigya.utils.xd._onFlashMessage&domain="+d);p.appendChild(h);a.appendChild(p);gigya.utils.functions.invokeOnPageLoad(function(){gigya.utils.DOM.appendToBody(a);p.setAttribute("type","application/x-shockwave-flash");p.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000")});
gigya.utils.xd._addedLegacyMethods[e]=!0},500)},removeMessageListener:function(a){delete this._listeners[a]}},script:{_pending:{},load:function(a,b,c,e,d){var f=gigya.utils.script._pending;e&&f[a]?f[a].loaded?c&&c():(f[a].onLoad.push(c),f[a].onError.push(b)):(e=function(){var d=document.createElement("script");d.async=!0;d.type="text/javascript";d.charset="UTF-8";f[a]||(f[a]={loaded:!1,onLoad:[c],onError:[b]});var e=f[a],h=!1,p=function(){if(!h){f[a].loaded=!0;for(var b=0;b<e.onLoad.length;b++)if("function"==
typeof e.onLoad[b])e.onLoad[b]();h=!0;setTimeout(function(){d.parentNode&&d.parentNode.removeChild(d)},5E3)}};d.onload=p;d.onreadystatechange=function(){"loaded"==this.readyState&&p()};d.onerror=function(){for(var b=0;b<e.onError.length;b++)if("function"==typeof e.onError[b])e.onError[b]();delete f[a]};var k=document.getElementsByTagName("head");k&&0<k.length&&k[0].appendChild(d);k=function(){d.src=a};6<=gigya.localInfo.iosVersion?k():setTimeout(k,1)},gigya.localInfo.isIE?gigya.utils.functions.invokeOnPageLoad(e):
e())}},sessionCache:{set:function(a,b){if(window.sessionStorage){var c;try{(c=gigya.utils.JSON.deserialize(window.sessionStorage.getItem("gigyaCache")))||(c={}),null==b&&c[a]?delete c[a]:c[a]={response:b,time:(new Date).getTime()},window.sessionStorage.setItem("gigyaCache",gigya.utils.JSON.serialize(c))}catch(e){}gigya.callsQueue.release("cache","cache_"+a)}},get:function(a,b,c){if(window.sessionStorage)try{if(!gigya.callsQueue.isActive("cache_"+a)){var e=window.sessionStorage.getItem("gigyaCache"),
d=gigya.utils.JSON.deserialize(e),f=d?d[a]:null;if(f){if(b&&b+f.time>(new Date).getTime()){c(f.response);return}gigya.utils.sessionCache.remove(a);f=null}if(!f){gigya.callsQueue.hold("cache","cache_"+a);c(null);return}}gigya.callsQueue.isActive("cache_"+a)&&gigya.callsQueue.waitFor("cache_"+a,gigya.utils.sessionCache.get,arguments)}catch(g){c(null)}else"function"==typeof c&&c()},remove:function(a){gigya.utils.sessionCache.set(a,null)}},stringUtils:{format:function(a,b){for(var c=0;c<arguments.length-
1;c++)null!=arguments[c+1]&&(a=a.split("{"+c+"}").join(arguments[c+1]));return a}},browser:{_cache:{},isModern:function(){return gigya.localInfo.isChrome||gigya.localInfo.isFF||gigya.localInfo.opera||gigya.localInfo.isIE&&9<=gigya.utils.browser.getVersion()||gigya.localInfo.isSafari&&4<=gigya.utils.browser.getVersion()},getVersion:function(){if(this._cache.version)return gigya.utils.browser._cache.version;var a=r.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);return a[2]&&(a=a[2].split(".")[0],
!isNaN(parseInt(a)))?gigya.utils.browser._cache.version=parseInt(a):0}}};gigya.localInfo.supportsLocalStorage?gigya.utils.localStorage={_getAllItems:function(){return window.localStorage},setItem:function(a,b){try{window.localStorage[a]=b}catch(c){}},getItem:function(a){return window.localStorage[a]},removeItem:function(a){window.localStorage.removeItem(a)}}:gigya.localInfo.isIE6||gigya.localInfo.isIE7?gigya.utils.localStorage={_start:function(){gigya.utils.localStorage.el||(gigya.utils.localStorage.el=
document.createElement("div"),gigya.utils.localStorage.el.addBehavior("#default#userData"),gigya.utils.DOM.appendToBody(gigya.utils.localStorage.el))},_getAllItems:function(){this._load();for(var a={},b=this.el.XMLDocument.firstChild.attributes,c=0;c<b.length;c++)a[b[c].name]=b[c].value;return a},_save:function(a){try{this._start(),this.el.save("gigya_ud")}catch(b){}},_load:function(){try{this._start(),this.el.load("gigya_ud")}catch(a){}},setItem:function(a,b){this._load();this.el.setAttribute(a,
b);this._save()},getItem:function(a){this._load();return this.el.getAttribute(a)},removeItem:function(a){this._load();this.el.removeAttribute(a);this._save()},implementation:"userData behavior (IE6/IE7)"}:gigya.localInfo.isFF&&(gigya.utils.localStorage={setItem:function(a,b){try{globalStorage[location.hostname][a]=b}catch(c){}},getItem:function(a){return globalStorage[location.hostname][a]},removeItem:function(a){delete globalStorage[location.hostname][a]}});gigya.utils.localStorage.setObject=function(a,
b){this.setItem(a,gigya.utils.JSON.serialize(b))};gigya.utils.localStorage.getObject=function(a){a=this.getItem(a);try{a=gigya.utils.JSON.deserialize(a)}catch(b){}return a};document.attachEvent?document.attachEvent("onmousemove",gigya.utils.mouse._moveEvent):document.addEventListener&&document.addEventListener("mousemove",gigya.utils.mouse._moveEvent,!1);gigya.auth={oAuthToken:{get:function(a){return a.oauth_token}},loginToken:{_triedGACs:{},_getTokenCookieName:function(a){a||(a=gigya.thisScript.APIKey);
return a?"glt_"+a:"_gig_lt"},get:function(a){return(a=gigya.utils.cookie.get(gigya.auth.loginToken._getTokenCookieName(a)))?a.split("|")[0]:null},set:function(a,b,c,e){gigya.utils.localStorage.removeItem("gigyaSettings");a||(a=gigya.thisScript.APIKey);a?(gigya.utils.cookie.set("glt_"+a,b,c),gigya.utils.cookie.remove("gac_"+a)):gigya.utils.cookie.set("_gig_lt",b,c)},setFromGAC:function(){if(gigya.thisScript.APIKey){var a=gigya.utils.cookie.get("gac_"+gigya.thisScript.APIKey);a&&('"'==a.charAt(0)&&
'"'==a.charAt(a.length-1)&&(a=a.substring(1,a.length-1)),gigya.callsQueue.isActive("API")?gigya.callsQueue.waitFor("API",gigya.auth.loginToken.setFromGAC,[]):gigya.auth.loginToken._triedGACs[a]||(gigya.auth.loginToken._triedGACs[a]=!0,gigya.socialize.notifyLogin({neverTryGAC:!0,authCode:a,APIKey:gigya.thisScript.APIKey,client_id:gigya.thisScript.APIKey},{callback:function(){gigya.utils.cookie.remove("gac_"+gigya.thisScript.APIKey);gigya.callsQueue.release("GAC","API");gigya.socialize.refreshUI({neverTryGAC:!0})}}),
gigya.callsQueue.hold("GAC","API")))}},setFromSSOResponse:function(a,b){b||(b=gigya.thisScript.APIKey);0==a.errorCode&&(gigya.auth.loginToken.set(b,a.login_token,a.expires_in),gigya.socialize.getUserInfo({signIDs:!0,callback:function(b){0==a.errorCode&&gigya.events.global._activeNamespaces.accounts&&gigya.accounts.getAccountInfo({callback:function(a){var b={eventName:"accounts.login"};gigya.utils.object.extractProperties(a,b,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data");
gigya.events.global.dispatch(b)},include:"profile,data",includeUserInfo:!1});b=gigya.socialize._addUserInfoToEvent(b,{eventName:"login"},!0);gigya.events.global.dispatch(b);gigya.external.backplane.executeOnInit(function(){gigya.external.backplane.getChannelId()&&gigya.socialize.notifySSOLogin({bp_channel_url:gigya.external.backplane.getChannelId()})})}}))},remove:function(a){gigya.auth.loginToken.get()&&gigya.utils.SSO.removeGroupToken();a||(a=gigya.thisScript.APIKey);gigya.utils.cookie.remove("glt_"+
a);gigya.utils.cookie.remove("_gig_lt")},migrateExisting:function(){var a=gigya.utils.cookie.get("_gig_lt");a&&(gigya.thisScript.APIKey&&!gigya.auth.loginToken.get())&&(gigya.utils.cookie.remove("_gig_lt"),gigya.auth.loginToken.set(null,a))},getTokenParam:function(a,b){var c=gigya.utils.cookie.get(gigya.auth.loginToken._getTokenCookieName(a));if(c)return c=c.split("|"),1<c.length?gigya.utils.keyValue.deserialize(c[1])[b]:null}}};gigya.log={_isEnabled:function(){return"1"==gigya.utils.cookie.get("_gig_dbgConsole_log")},
_log:[],log:function(a,b){if(gigya.log._isEnabled()){b=gigya.utils.object.clone(b,!0,!1,4,null,!0);var c=a;null!=b&&(c+=":"+("object"==typeof b?"\n":"")+gigya.utils.JSON.serialize(b,!0,!0));gigya.log._log.push(c);"object"==typeof console&&console.log(c);null!=document.getElementById("gigya_log")&&gigya.log.show&&gigya.log.show()}},logCall:function(a,b,c){c||(c=b.lastSource);gigya.log.log("Calling "+a+(c&&c!=a?" for "+c:"")+(b.source&&c!=b.source?" initiated from "+b.source:"")+" with these params",
b)}};gigya.debug=function(){gigya.utils.script.load(gigya.thisScript.base+"/js/gigya.services.socialize.plugins.log.min.js",null,function(){gigya.log.showConfig()},!0)};gigya.showLog=function(){gigya.utils.script.load(gigya.thisScript.base+"/js/gigya.services.socialize.plugins.log.min.js",null,function(){gigya.log.show()},!0)};gigya.callsQueue={_q:{},isActive:function(a){if(!this._q[a])return!1;var b=0,c;for(c in this._q[a].ids)b++;return 0<b},release:function(a,b){if(this._q[b]&&(delete this._q[b].ids[a],
!this.isActive(b))){var c=this._q[b].q;for(this._q[b].q=[];0<c.length;){var e=c.splice(0,1)[0];e.func.apply(this,e.args);if(this.isActive(b)){this._q[b].q=c;break}}}},hold:function(a,b){this._q[b]||(this._q[b]={q:[],ids:{}});this._q[b].ids[a]=!0},waitFor:function(a,b,c){this._q[a]||(this._q[a]={q:[],ids:{}});this._q[a].q.push({func:b,args:c})},queueForExecution:function(a,b,c){c=c||[];gigya.callsQueue.isActive(a)?gigya.callsQueue.waitFor(a,b,c):b.apply(this,c)}};gigya.thisScript={APIKey:null,protocol:"http:"==
document.location.protocol?"http":"https",base:null,params:{},globalConf:{},lang:{},scriptElement:null,_retried:0,_getScriptElement:function(){for(var a=document.getElementsByTagName("script"),b=a.length-1;0<=b;b--){var c=a[b],e=c.src.toLowerCase();if(""!=e&&(-1<e.indexOf("//cdn.gigya.com")||-1<e.indexOf("//cdns.gigya.com")||-1<e.indexOf("?apikey="))&&(-1<e.indexOf("gigya.js")||-1<e.indexOf("socialize.js")||-1<e.indexOf("gsjssdk.js"))){gigya.thisScript.scriptElement=c;break}}gigya.thisScript.scriptElement?
(gigya.thisScript.protocol=0==gigya.thisScript.scriptElement.src.toLowerCase().indexOf("https")?"https":"http",gigya.thisScript.arPaths=gigya.thisScript.scriptElement.src.split("/"),gigya.thisScript.base=gigya.thisScript.arPaths[0]+"//"+gigya.thisScript.arPaths[2],gigya.thisScript.URLParams=gigya.utils.URL.getParamsFromURL(gigya.thisScript.scriptElement.src,!0),gigya.callsQueue.release("thisScript","API")):(gigya.thisScript.base="http"==gigya.thisScript.protocol?"http://cdn.gigya.com":"https://cdns.gigya.com",
gigya.thisScript.URLParams={},10>gigya.thisScript._retried?(gigya.thisScript._retried++,gigya.callsQueue.hold("thisScript","API"),window.setTimeout(gigya.thisScript._getScriptElement,200)):gigya.callsQueue.release("thisScript","API"))}};gigya.thisScript._getScriptElement();gigya.callsQueue.queueForExecution("API",function(){if(gigya.thisScript.scriptElement&&""!=gigya.thisScript.scriptElement.innerHTML.replace(/^\s+|\s+$/g,""))try{gigya.thisScript.globalConf=gigya.utils.JSON.deserialize(gigya.thisScript.scriptElement.innerHTML),
"object"!=typeof gigya.thisScript.globalConf&&(gigya.thisScript.globalConf={})}catch(a){alert("Gigya global configuration object parse error"),gigya.thisScript.globalConf={}}"object"!=typeof window.__gigyaConf&&(window.__gigyaConf={});"object"!=typeof gigya.partnerSettings.plugins&&(gigya.partnerSettings.plugins={});gigya.thisScript.globalConf=gigya.utils.object.merge([gigya.partnerSettings.plugins,gigya.thisScript.globalConf,window.__gigyaConf]);gigya.thisScript.URLParams.apikey&&(gigya.thisScript.APIKey=
gigya.thisScript.URLParams.apikey);!gigya.thisScript.APIKey&&("object"==typeof console&&console.warn&&gigya.thisScript.scriptElement)&&console.warn("**** WARNING - Loading socialize.js without an APIKey parameter is unsupported and may result in an unexpected behavior.  ****");var b=gigya.thisScript.URLParams.lang;b||(b="en-US");var b=b.replace("_","-").toLowerCase(),c=b.split("-"),e=c[0],c=1<c.length?c[1]:e,c=c.toUpperCase();switch(b){case "es-mx":case "pt-br":case "zh-cn":case "zh-hk":case "zh-tw":case "en-gb":case "te-st":break;
default:b=e}gigya.thisScript.lang={full:e+"-"+c,langCode:b,countryCode:c}});gigya.reports={trackAddressBarShares:function(){if(gigya.thisScript.globalConf.trackAddressBarShares){var a=gigya.auth.loginToken.getTokenParam(null,"UUID"),b=document.location.href.split("#");1!=b.length&&""!=b[1]||document.location.replace("#guid="+(a?a:"_"))}},report:function(a,b,c,e,d,f){var g=arguments;gigya.utils.functions.invokeOnPageLoad(function(){window.setTimeout(function(){if(a)if(b||(b=gigya.thisScript.APIKey),
gigya.callsQueue.isActive("API"))gigya.callsQueue.waitFor("API",gigya.reports.report,g);else{var l=new Image(1,1),h={sdk:"js",f:"re",e:a,ak:b,cid:c,source:e,sourceData:d,now:(new Date).getTime(),ucid:gigya.partnerSettings.ucid};if(f)for(var p in f)h[p]=f[p];p="https";if("load"==a||"loadc"==a)p=gigya.thisScript.protocol;"https"==p&&(h.gcid=gigya.partnerSettings.gcid);h=gigya.utils.stringUtils.format("{0}://gscounters.{1}/gs/api.ashx?{2}",p,gigya.partnerSettings.plugins.apiDomain,gigya.utils.keyValue.serialize(h));
l.src=h}},500)},!0)},reportLoad:function(a,b){if(!b._reportedLoad&&b.containerID){b._reportedLoad=!0;var c="load";"gigya.socialize.plugins.reactions.showReactionsBarUI"!=a&&("gigya.socialize.plugins.simpleshare.showSimpleShareUI"==a&&(c="loadSimple"),this.report(c,b.APIKey,b.cid,b.source,b.sourceData))}}};gigya.getVersion=function(){return"js_"+gigya.build.version};gigya.socialize.showShareUI=function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]),b=a.operationMode;b&&(b=
b.toLowerCase().replace(/ /g,""));a.containerID||(delete a.width,delete a.height);return"simpleshare"==b||"autodetect"==b&&!n.canSendRequest(a)?gigya.socialize.showSimpleShareUI(a):n.showUI("share","showShareUI",a,!0,{width:520,height:320},{width:595,height:324},"userAction")};gigya.comments.showCommentsUI=function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]);n.prepareParameters(a);return 2==a.version&&gigya.utils.browser.isModern()?n.showUI("comments.comments2","showCommentsUI",
a,!1,{width:500}):n.showUI("comments.comments","showCommentsUI",a,!1,{width:500})};gigya.gm.showNotifications=function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]),b=gigya.utils.localStorage.getObject("gmSettings");if(!b||!b.disableNotifications)return a.containerID="gigNotifications",document.getElementById(a.containerID)||(b=document.createElement("div"),b.id=a.containerID,b.style.position="absolute",b.style.left="-1000px",gigya.utils.DOM.appendToBody(b)),n.showUI("gm.notifications",
"showNotifications",a)};gigya.socialize.showConnectUI=function(){this.showAddConnectionsUI.apply(this,Array.prototype.slice.apply(arguments))};gigya.socialize.login=function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]);gigya.auth.loginToken.remove(a.APIKey);n.endPoint("login",a,function(a,c){a.dontClose&&"false"!=a.dontClose||gigya.utils.window.close(c.id);0==a.errorCode?gigya.utils.validation.isExplicitTrue(c.p.authCodeOnly)?n.handleRESTResponse(c,{authCode:a.code}):
n.handleRESTResponse(c,a):n.handleRESTResponse(c,a)})};gigya.accounts._injectCSS=function(a){a||(a={});return n.showUI("accounts.screenSet","_injectCSS",a,!0,null,null,null,null,!0)};gigya.accounts.socialLogin=function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]);gigya.auth.loginToken.remove(a.APIKey);n.endPoint("/accounts.socialLogin",a,function(a,c){a.dontClose&&"false"!=a.dontClose||gigya.utils.window.close(c.id);n.handleRESTResponse(c,a)})};gigya.socialize.addConnection=
function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]);n.endPoint("addConnection",a,function(a,c){a.dontClose&&"false"!=a.dontClose||gigya.utils.window.close(c.id);n.handleRESTResponse(c,a)})};gigya.socialize.requestPermissions=function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]);n.endPoint("requestPermissions",a,function(a,c){a.dontClose&&"false"!=a.dontClose||gigya.utils.window.close(c.id);n.handleRESTResponse(c,a)})};gigya.socialize.postBookmark=
function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]);a.APIKey||(a.APIKey=gigya.thisScript.APIKey);var b={};gigya.utils.object.extractProperties([a],b,n.APIParamSchema.postBookmark);b.sdk=gigya.getVersion();if(!(b.URL&&""!=b.URL||b.url&&""!=b.url||!b.userAction||b.userAction.linkBack))for(var c=document.getElementsByTagName("meta"),e=0;e<c.length;e++)if("og:url"==c[e].getAttribute("property")&&c[e].getAttribute("content")){b.URL=c[e].getAttribute("content");break}b.URL||
(b.url||!b.userAction||b.userAction.linkBack)||(b.URL=document.location.href);delete b.context;b.provider||(a.provider="");b.providerKey||"facebook"!=b.provider.toLowerCase()||(b.providerKey=gigya.external.openGraph.getMetaTag("fb:app_id"));var c=gigya.utils.keyValue.serialize(b),e=n.getBookmarkSize(b.provider),d=a.enablePopupLocation?"location=1,toolbar=1":null;e.w&&e.h&&(d=(a.enablePopupLocation?"location=1,toolbar=1,":"toolbar=0,")+"menubar=0,resizable=1,scrollbars=1,width="+e.w+",height="+e.h);
gigya.log.logCall("postBookmark",b);gigya.utils.window.open(gigya.utils.stringUtils.format("https://socialize.{0}/gs/bookmark.aspx?{1}",a.apiDomain,c),"gs_bookmark_"+b.provider,d)};gigya.socialize.trackReferrals=function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]),b=a.APIKey?a.APIKey:gigya.thisScript.APIKey,c={},e={};-1!=document.location.href.indexOf("#")&&(e=gigya.utils.keyValue.deserialize(document.location.href.split("#")[1]));-1!=document.location.href.indexOf("?")&&
(c=gigya.utils.keyValue.deserialize(document.location.href.split("?")[1].split("#")[0]));e.guid&&"_"!=e.guid&&gigya.utils.cookie.set("_gigRefUid_"+b,e.guid);var d=e._giguuid||c._giguuid;d&&gigya.utils.cookie.set("_gigRefUid_"+b,d);if(null==e._gus&&null==c._gus){if(!gigya.reportedReferrals){var f,e={url:document.location.href,ref:document.referrer};c.fb_ref?(f=gigya.utils.keyValue.deserialize(c.fb_ref,":"),e.uuid=f.uu,e.sn=f.p,f=f.s):document.referrer&&-1!=document.referrer.indexOf("://")&&(c=document.referrer.split("://")[1].split("/")[0],
0==c.indexOf("www.")&&(c=c.split("www.")[1]),d={"digg.com":"digg","stumbleupon.com":"stumbleupon","delicious.com":"delicious","technorati.com":"technorati","t.co":"twitter","plus.url.google.com":"googlePlus","facebook.com":"facebook","linkedin.com":"linkedIn","pinterest.com":"pinterest"},d[c]&&(e.sn=d[c]));e.sn||document.referrer&&(-1!=document.referrer.indexOf("http://soc.li")||-1!=document.referrer.indexOf("https://shr.gs"))||(c=document.location.href.split("#guid="),1<c.length&&(c=c[1].split("#")[0].split("&")[0],
c!=gigya.auth.loginToken.getTokenParam(b,"UUID")&&(e.sn="AddressBarShares",e.uuid=c,"_"==c&&delete e.uuid,document.location.replace("#"),gigya.reports.trackAddressBarShares(),e.url=document.location.href.split("#")[0])));e.uuid&&gigya.utils.cookie.set("_gigRefUid_"+b,e.uuid);e.sn&&gigya.reports.report("linkback",b,a.cid,f,null,e);gigya.reportedReferrals=!0}"function"==typeof a.callback&&a.callback({status:"OK",statusMessage:"",operation:"trackReferrals",context:a.context,errorMessage:"",errorCode:0})}};
gigya.socialize.sendEmailNative=function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]),b=a.userAction||{};document.location.href="mailto:?to=&subject="+(b.title||"")+"&body="+(b.linkBack||"");gigya.socialize.sendEmail(a,{dontSendEmail:!0})};gigya.socialize.hideUI=function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]);"function"==typeof a.callback&&a.callback({status:"OK",statusMessage:"",operation:"hideUI",context:a.context,errorMessage:"",errorCode:0})};
gigya.gcs.submitUserForm=function(){var a={},b=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]),c=document.getElementById(b.form);c||(arForms=document.getElementsByName(b.form))&&0<arForms.length&&(c=arForms[0]);for(var e=0;e<c.elements.length;e++){var d=c.elements[e];if(d.name){for(var f=d.name.split("."),g=a,l=0;l<f.length-1;l++){var h=f[l];g[h]||(g[h]={});g=g[h]}g[f[f.length-1]]=d.value}}b.data=a;gigya.gcs.setUserData(b)};gigya.socialize.addEventHandlers=function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,
arguments]),b=a.namespace?a.namespace:"socialize",c;for(c in a)0==c.indexOf("on")&&gigya.events.global.add(c,a[c],a.listenerType,a.context,b);"function"==typeof a.callback&&a.callback({status:"OK",statusMessage:"",errorCode:0,errorMessage:"",operation:"addEventHandlers",context:a.context})};gigya.accounts.addEventHandlers=function(){var a=gigya.utils.object.merge([arguments,{namespace:"accounts"}]);gigya.socialize.addEventHandlers(a)};gigya.socialize.waitForService=function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,
arguments]),b=a.service;b&&(b=b.toLowerCase(),"fbconnect"==b||"facebook"==b)&&(b=a.callback,!gigya.external.facebook._initializedTime||0>gigya.external.facebook._initializedTime?gigya.socialize.addEventHandlers({listenerType:"component"},{onFacebookLoaded:b,context:a.context}):b({context:a.context}))};gigya.socialize.refreshUI=function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]),b=a.callback;a.callback=function(c){var e={eventName:"login",isInternal:!0};a.provider&&(e.provider=
a.provider);gigya.socialize._addUserInfoToEvent(c,e,!0);a.context&&(e.context=a.context);gigya.events.global.dispatch(e);"function"==typeof b&&b(c)};gigya.socialize.getUserInfo(a)};gigya.socialize.getProviderShareCounts=function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]);gigya.utils.script.load(gigya.thisScript.base+"/js/gigya.services.socialize.plugins.shareCounts.min.js",null,function(){gigya.services.socialize.plugins.shareCounts.getProviderShareCounts(a)},!0)};gigya.socialize._injectFBC=
function(){gigya.callsQueue.queueForExecution("API",function(){gigya.utils.functions.invokeOnPageLoad(gigya.external.facebook.load)})};var n={canSendRequest:function(){var a=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]);return gigya.auth.loginToken.get(a.APIKey)||gigya.auth.oAuthToken.get(a)},showUI:function(a,b,c,e,d,f,g,l,h){n.prepareParameters(c);var p="socialize",k=a;-1!=a.indexOf(".")&&(p=a.substr(0,a.indexOf(".")),k=a.substr(a.indexOf(".")+1));l||gigya.socialize.pluginsCoreLoaded||
(gigya.callsQueue.hold("pluginsJS","UI"),gigya.utils.script.load(gigya.thisScript.base+"/js/gigya.services.socialize.plugins.min.js",null,null,!0),gigya.utils.script.load(gigya.thisScript.base+"/js/gigya.services."+p+".plugins."+k+".min.js"+(c.lang?"?lang="+c.lang:""),null,null,!0));if(gigya.callsQueue.isActive("UI"))gigya.callsQueue.waitFor("UI",n.showUI,arguments);else{d||(d={});f||(f={});g||(g="");var q=g.split("|");if(null==c.containerID)if(e)c.containerID="";else{gigya.events.dispatchInvalidParamError(c,
"containerID");return}var m=c.containerID;h&&(m=c.containerID="");var s=""==m||c.isPopup,t;for(t in d)null==c[t]&&(c[t]=s&&f[t]?f[t]:d[t]);if(s)for(t in f)c[t]||(c[t]=d[t]);var r=!gigya.utils.validation.isExplicitFalse(c.needsContainer);r&&!s&&gigya.utils.DOM.clearByID(m);for(m=0;m<q.length;m++)if(t=q[m],""!=t&&(null==c[t]||""==c[t])){gigya.events.dispatchInvalidParamError(c,t);return}if(c.source)c.isPopup=!1;else if(c.source="showSimpleShareUI"==b?"showShareUI":b,q={showReactionsBarUI:["barID"],
showCommentsUI:["categoryID","streamID"],showFeedUI:["feedID"],showChatUI:["configID","streamID","chatID"]},!c.sourceData&&q[b]){for(var s={},v=!1,m=0;m<q[b].length;m++)t=q[b][m],null!=c[t]&&(v=!0,s[t]=c[t]);v&&(c.sourceData=s)}c.stacktrace||(c.stacktrace=[]);c.lang||(c.lang=gigya.thisScript.lang.langCode);c.stacktrace.push({source:b});c.lastSource=b;if(l)gigya.utils.script.load(gigya.thisScript.base+"/js/gigya.services."+p+".plugins."+k+".min.js"+(c.lang?"?lang="+c.lang:""),null,function(){gigya[p].plugins[k][b](c,
c,c)},!0);else return gigya.socialize._AddJSRequest("gigya.services."+p+".plugins."+k,"gigya."+p+".plugins."+k+"."+b,r,c)}},getBookmarkSize:function(a){var b,c;a=a.toLowerCase();switch(a){case "facebook":b=640;c=370;break;case "twitter":b=880;c=585;break;case "messenger":b=710;c=905;break;case "linkedin":b=560;c=500;break;case "yahoobookmarks":b=840;c=975;break;case "digg":b=1010;c=1045;break;case "delicious":b=890;c=905;break;case "googlebookmarks":b=710;c=905;break;case "mixi":b=640;c=470;break;
case "googleplus":b=496,c=420}return{w:b,h:c}},getGigyaSettings:function(a){var b=gigya.utils.localStorage.getItem("gigyaSettings");try{b=gigya.utils.JSON.deserialize(b)}catch(c){b={}}b||(b={});return gigya.utils.JSON.serialize(b[a])},setGigyaSettings:function(a,b){var c=gigya.utils.localStorage.getItem("gigyaSettings");try{c=gigya.utils.JSON.deserialize(c)}catch(e){c={}}c||(c={});c[a]||(c[a]={});for(var d in b)c[a][d]=b[d];gigya.utils.localStorage.setItem("gigyaSettings",gigya.utils.JSON.serialize(c))},
delGigyaSettings:function(a,b){if(a){var c=gigya.utils.localStorage.getItem("gigyaSettings");c&&(c=gigya.utils.JSON.deserialize(c),delete c[a],gigya.utils.localStorage.setItem("gigyaSettings",gigya.utils.JSON.serialize(c)))}else gigya.utils.localStorage.removeItem("gigyaSettings")},endPoint:function(a,b,c){if(gigya.callsQueue.isActive("API"))gigya.callsQueue.waitFor("API",n.endPoint,arguments);else{gigya.thisScript.APIKey&&!b.APIKey&&(b.APIKey=gigya.thisScript.APIKey);var e=b.callback,d=b.context,
f=b.authCodeOnly,g=a.replace(/\./g,"_").replace(/\//g,"")+"_"+(new Date).getTime();gigya.utils.xd.addMessageListener(g,{id:g,c:b,p:b,i:b,callback:e,context:d,operation:b._operation?b._operation:a,apiName:a},c);var l="socialize";-1!=a.indexOf(".")&&(e=a.indexOf("."),l=a.substr(0,e).replace("/",""),a=a.substr(e+1));var e=gigya.utils.stringUtils.format("https://{0}.{1}/{0}.{2}?",l,b.apiDomain,a),d={},h=gigya.auth.loginToken.get(b.APIKey),p=gigya.auth.oAuthToken.get(b);if("addConnection"==a){var k=b.connectWithoutLoginBehavior;
k&&(k=k.toLowerCase());"loginexistinguser"==k&&(d.x_loginIfExists=!0);""!=h&&null!=h||null!=p&&""!=p||(e=gigya.utils.stringUtils.format("https://socialize.{0}/socialize.login?",b.apiDomain),b.userWasLoggedOut=!0,"alwayslogin"!=k&&(d.x_temporary_account=!0))}var q;b&&b.provider&&b[b.provider+"ExtraPermissions"]&&(q=b[b.provider+"ExtraPermissions"]);b&&(b.permissions&&!q)&&(q=b.permissions,delete b.permissions);b.pendingRegistration?b.pending_registration=b.pendingRegistration:b.newUsersPendingRegistration&&
(b.pending_registration=b.newUsersPendingRegistration);!0==b.alwaysForceAuthentication&&(b.forceAuthentication=!0);gigya.utils.object.extractProperties([b],d,n.APIParamSchema.common+"|"+n.APIParamSchema.login);for(var m in d)0!=m.indexOf("x_")&&(d["x_"+m]=b[m],delete d[m]);d.client_id=d.x_APIKey;delete d.x_APIKey;d.redirect_uri="/GS/AfterLogin.aspx";d.response_type=f?"code":"server_token";d.format="jsonp";d.x_sdk=gigya.getVersion();"accounts"==l&&gigya.events.global._activeNamespaces.socialize&&(d.includeUserInfo=
!0);d.x_include=d.include?d.include+",":"profile,data";d.authMode="cookie";p&&(d.oauth_token=p,d.authMode="token");q&&(d.x_extraPermissions=q);gigya.partnerSettings.gcid&&(d.gcid=gigya.partnerSettings.gcid);gigya.partnerSettings.ucid&&(d.ucid=gigya.partnerSettings.ucid);(f=gigya.utils.cookie.get("_gigRefUid_"+b.APIKey))&&(d.x_refUID=f);q=gigya.utils.xd._flashListenerID;b.legacyCrossSiteMethod&&"localstorage"!=b.legacyCrossSiteMethod.toLowerCase()&&(q=b.legacyCrossSiteMethod+":"+gigya.utils.xd._flashListenerID);
f=b.authFlow?b.authFlow:"popup";q={domain:document.location.href.split("?")[0].split("#")[0],id:g,lid:q};m=b.redirectURL;m||(m=document.location.href);if("redirect"==f||gigya.localInfo.isWindowsPhone)q.redirectURL=gigya.utils.URL.addParamsToURL(m,{gig_events:gigya.events.global.getEventsForOperation(a)}),null!=b.redirectURL&&(q.addUserInfo=!0,q.redirectMethod=b.redirectMethod);b.provider&&"facebook"==b.provider.toLowerCase()&&(q.invite=b.invite);(m=gigya.external.backplane.getChannelId())&&(q.bp_channel_url=
m);d.state=gigya.utils.keyValue.serialize(q);b.requestParams=d;q=gigya.utils.keyValue.serialize(d);var s;d&&d.x_provider&&(s=gigya.socialize._getProviderByName(d.x_provider.toLowerCase()));m=null;null!=s&&(m=(b.enablePopupLocation?"location=1,toolbar=1":"toolbar=0,")+"menubar=0,resizable=1,scrollbars=1,width="+s.width+",height="+s.height);gigya.reports.report(a,b.APIKey,b.cid,d.source,d.sourceData,{sn:s?s.toString():null});gigya.log.logCall(a,b);"redirect"==f?document.location.href=e+q:gigya.utils.window.open(e+
q,g,m)}},getCommonNonOverridableParams:function(a){a||(a=gigya.thisScript.APIKey);var b={},c=gigya.auth.loginToken.get(a);null!=c&&(b.login_token=c);null!=a&&(a=gigya.utils.cookie.get("gltexp_"+a),null!=a&&(b.loginTokenExp=a));gigya.partnerSettings.gcid&&(b.gcid=gigya.partnerSettings.gcid);gigya.partnerSettings.ucid&&(b.ucid=gigya.partnerSettings.ucid);if(gigya.customDomain){a=gigya.external.facebook.getParams();for(var e in a)b[e]=a[e]}return b},prepareParameters:function(a){for(var b in a)-1!=b.toLowerCase().indexOf("provider")&&
"string"==typeof a[b]&&(a[b]=gigya.socialize.replaceProviderAliases(a[b]));a.lang||(a.lang=gigya.thisScript.lang.langCode)},processMergedParams:function(a,b){b.hasOwnProperty("timestamp")&&(b.UIDTimestamp=b.timestamp,delete b.timestamp);b.hasOwnProperty("signature")&&0!=a.indexOf("/")&&(b.UIDSig=b.signature,delete b.signature);b.hasOwnProperty("nonce")&&(b.UIDNonce=b.nonce,delete b.nonce);b.hasOwnProperty("format")&&!b.dataFormat&&(b.dataFormat=b.format,delete b.format);b.hasOwnProperty("recipients")&&
(b.recipients=n.extractListOfGIGUIDs(b.recipients));if(b.hasOwnProperty("friends")){var c=n.extractListOfGIGUIDs(b.friends);0<b.UIDs.length&&(b.UIDs+=",");b.UIDs+=c}},getCommonOverridableParams:function(){var a={};a.APIKey=gigya.thisScript.APIKey;a.targetEnv="jssdk";var b=gigya.external.backplane.getChannelId();b&&(a.bp_channel_url=b);return a},convertIdentitiesArrayToObject:function(a){if(null==a.identities)a.identities={};else if(a.identities.constructor==Array){var b=a.identities;a.identities=
{};for(var c=0;c<b.length;c++)a.identities[b[c].provider]=new gigya.socialize.Identity(b[c])}},saveTokenFromResult:function(a,b,c){a.sessionInfo&&(a=a.sessionInfo);a.hasOwnProperty("login_token")&&gigya.auth.loginToken.set(b,a.login_token,a.expires_in,c)},handleSpecialFields:function(a){var b=gigya.socialize.Collection,c=function(a,b){for(var c=[],d=0,e=a[d];e;)c.push(new b(e)),c[d].identities&&n.convertIdentitiesArrayToObject(c[d]),e=a[++d];return c};a.photos&&(a.photos=new b(a.photos,""));a.albums&&
(a.albums=new b(a.albums,""));a.contacts&&(a.contacts=new b(c(a.contacts,gigya.socialize.Contact),"email"));a.friend&&(a.friend=new b(c(a.friend,gigya.socialize.Friend),"UID"));a.user&&(a.user=new gigya.socialize.User(a.user));if(a.friends&&a.friends instanceof Array){for(var e=[],d=0;d<a.friends.length;d++)e.push(a.friends[d].UID);a.UIDs=e.join(",");a.friends=new b(c(a.friends,gigya.socialize.Friend),"UID")}},extractListOfGIGUIDs:function(a){switch(typeof a){case "string":return a;case "object":if("undefined"!=
typeof a.UID)return a.UID;if(a instanceof gigya.socialize.Collection){var b=[];a.each(function(a,e){var d=n.extractListOfGIGUIDs(a);null!=d&&""!=d&&b.push(d)});return b.join(",")}}},APIParamSchema:{common:"APIKey|cid|oauth_token|login_token|source|sourceData|usePost|refUID",login:"provider|redirect_uri|pending_registration|lang|extraPermissions|permissions|sessionExpiration|forceAuthentication|includeiRank|includeAllIdentities|extraFields|enabledProviders|disabledProviders|signIDs|openIDUsername|openIDURL|openIDProviderLogo|openIDProviderName|finalizeRegistration|include|actionAttributes|profileAttributes|googlePlayAppID|bp_channel_url",
postBookmark:"provider|URL|url|title|description|target|cid|APIKey|shortURLs|source|sourceData|providerKey|thumbnailURL|tags|userAction|[providerCapability=actions]UserAction|actionAttributes"},generateEventsFromResponse:function(a,b,c){var e=b.operation;b.p&&b.p.hasOwnProperty("getUserInfoFor")&&(b.operation=e=b.p.getUserInfoFor,delete b.p.getUserInfoFor);var d;if(0==a.errorCode)switch(e){case "unlinkAccounts":case "deleteAccount":d={eventName:"logout,accounts.logout"};break;case "linkAccounts":case "setUID":gigya.socialize._addUserInfoToEvent(a,
d,!0);break;case "removeConnection":case "disconnect":d={eventName:"connectionRemoved,disconnect",provider:b.p.provider?b.p.provider:""};gigya.socialize._addUserInfoToEvent(a,d);break;case "addConnection":case "connect":b.i.userWasLoggedOut&&gigya.utils.validation.isExplicitTrue(a.user.isLoggedIn)?(d={eventName:"login",provider:b.p.provider},gigya.socialize._addUserInfoToEvent(a,d,!0)):(d={eventName:"connectionAdded,connect",provider:b.p.provider},gigya.socialize._addUserInfoToEvent(a,d));break;case "/accounts.linkAccounts":case "/accounts.finalizeRegistration":case "/accounts.login":case "/accounts.register":case "/accounts.socialLogin":var f=
{eventName:"accounts.login",remember:gigya.utils.validation.isExplicitTrue(a.requestParams.remember),provider:b.p.provider?b.p.provider.toLowerCase():""};gigya.utils.object.extractProperties(c.profile?c:a,f,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data");gigya.events.global.dispatch(f,b.p);case "finalizeRegistration":case "register":case "login":if(!a.user&&!a.authCode)break;d={eventName:"login"};d.provider=b.p.provider?b.p.provider:"site";a.authCode&&(d.authCode=a.authCode);
gigya.socialize._addUserInfoToEvent(a,d,!0);c=b.p.provider;a.user&&c&&(c=c.toLowerCase(),gigya.utils.cookie.set("_gig_llp",c),gigya.utils.cookie.set("_gig_llu",a.user.firstName||""));break;case "/accounts.logout":case "logout":d={eventName:"logout,accounts.logout"};break;case "notifyLogin":b.c.authCode||(d||(d={eventName:"login"}),d.provider="site",gigya.socialize._addUserInfoToEvent(a,d,!0));b.p.context&&b.p.context.eventOnSuccess&&(d=gigya.utils.object.clone(b.p.context.eventOnSuccess),gigya.socialize._addUserInfoToEvent(a,
d,!0));break;case "/gm.notifyAction":gigya.events.global.dispatch({eventName:"actionNotified",isInternal:!0})}("login"==e||"addConnection"==e||"/accounts.socialLogin"==e)&&(null!=b.p.redirectURL&&""!=b.p.redirectURL&&d&&d.user)&&gigya.utils.redirect(b.p.redirectURL,[d,d.user],b.p.redirectMethod);0==a.errorCode&&(d&&"login"==d.eventName&&!a.profile&&gigya.events.global._activeNamespaces.accounts&&-1==e.indexOf("/accounts"))&&(e=gigya.utils.object.clone(b.p),delete e.callback,gigya.accounts.getAccountInfo(e,
{include:"profile,data",includeUserInfo:!1,_operation:"/accounts.socialLogin",originalResponse:a}));null!=d&&(d.context=b.context,gigya.events.global.dispatch(d,b.p))},checkReturnFromRedirect:function(){var a=gigya.utils.URL.getParamsFromURL(document.location.href);a.gig_events&&(0==a.errorCode&&gigya.auth.loginToken.get()?gigya.utils.SSO.setGroupTokenFromResponse({errorCode:0,login_token:gigya.auth.loginToken.get(),expires_in:a.expires_in},function(){var b=a.gig_events.split(",");-1!=gigya.utils.array.indexOf(b,
"accounts.login")?gigya.accounts.getAccountInfo({include:"profile,data,userinfo",callback:function(a){var e={errorCode:0,eventName:"accounts.login"};gigya.utils.object.extractProperties(a,e,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data");gigya.events.global.dispatch(e);gigya.events.global.dispatchWhenHandlerAdded(e);-1!=gigya.utils.array.indexOf(b,"socialize.login")&&(a=gigya.socialize._addUserInfoToEvent(a,{errorCode:0,eventName:"socialize.login"},!0),gigya.events.global.dispatch(a),
gigya.events.global.dispatchWhenHandlerAdded(a))}}):gigya.socialize.getUserInfo({signIDs:!0,callback:function(a){for(var e=0;e<b.length;e++){var d=gigya.socialize._addUserInfoToEvent(a,{errorCode:0,eventName:b[e]},!0);gigya.events.global.dispatch(d);gigya.events.global.dispatchWhenHandlerAdded(d)}}})},gigya.thisScript.globalConf.legacyCrossSiteMethod):a.errorCode&&a.regToken&&n.checkCompleteRegistration(a,gigya.thisScript.globalConf))},checkCompleteRegistration:function(a,b){if(!b.dontHandleScreenSet&&
(206001==a.errorCode||403043==a.errorCode||206002==a.errorCode||206003==a.errorCode)){var c;b.defaultMobileRegScreenSet&&gigya.localInfo.isMobile?c=b.defaultMobileRegScreenSet:b.defaultRegScreenSet&&(c=b.defaultRegScreenSet);c&&gigya.accounts.showScreenSet({initialResponse:a,screenSet:c})}}};gigya.global.JPRequests={};gigya.global.JPRequest=function(a){this.rid=a;this.retryTimerID=null;this.cmds=[];this.retry=0;this.inProgress=!1};gigya.global.JPRequest.prototype={loadedFormIFrame:function(a){a.didSubmitForm?
this.getSavedFormResponse():(window.setTimeout(function(){document.getElementById("coreDiv_Form_"+a.id).submit()},10),a.didSubmitForm=!0)},getSavedFormResponse:function(){if(this.cmds&&0<this.cmds.length){var a={},b=this.cmds[0];gigya.utils.object.extractProperties(b.params,a,"APIKey|authMode|oauth_token|saveResponseID|login_token|methodURL|gcid|ucid");gigya.socialize.sendRequest("getSavedResponse",a,b.context,n.handleRESTResponse,null,b.useHTTP)}}};gigya.global.JPCMD=function(a){this.url=a;this.params=
{};this.ifrName="gigyaPostIframe_"+(new Date).getTime();this.callback=this.context=null};gigya.global.JPCMD.prototype={addParam:function(a,b){this.params[a]=b;return this},createParamFormElements:function(){var a=[],b="";for(b in this.params)a=a.concat(['<textarea name="',b,'">']),"object"==typeof this.params[b]?a.push(gigya.utils.URL.URLEncode(gigya.utils.JSON.serialize(this.params[b]))):a.push(this.params[b]),a.push("</textarea>");return a.join("")},GetDataPendingTimeout:function(a){return 4>=a?
500:8>=a?1E3:21>=a?2E3:39>=a?5E3:-1},handleResponse:function(a,b){if(!b&&(b=a.context?a.context:a.state,!b))return;var c=gigya.global.JPRequests[b];if(c){null!=c.retryTimerID&&window.clearTimeout(c.retryTimerID);c.loaded=!0;c.inProgress=!1;var e=c.cmds.slice(0);c.cmds=[];if(100001==a.errorCode&&(c=this.GetDataPendingTimeout(c.retry++),0<c)){window.setTimeout(function(){for(var a=0;a<e.length;a++)e[a].run(b)},c);return}delete gigya.global.JPRequests[b];for(c=0;c<e.length;c++)this.handleCmdResponse(e[c],
a)}},handleCmdResponse:function(a,b){b=gigya.utils.object.clone(b);var c=a.formDiv;c&&c.parentNode&&c.parentNode.removeChild(c);b.dontTryAgain&&delete b.dontTryAgain;if(403030!=b.errorCode||!a.onSessionExpired(b)){var e=function(){"function"==typeof a.callback&&a.callback(a.context,b,a.params.login_token)},c=a.context.operation;if(403005==b.errorCode&&a.params.login_token){var d=function(b){b?a.params.login_token=b:delete a.params.login_token;delete a.presetResponse;a.run()},f=function(){gigya.auth.loginToken.remove(a.params.APIKey);
a.context.oApi.needsAuth?e():d()};gigya.partnerSettings.ssoKey?gigya.utils.SSO.getGroupToken({callback:function(b){b.login_token&&b.login_token.split("|")[0]!=a.params.login_token?(gigya.auth.loginToken.setFromSSOResponse(b,a.params.APIKey),d(gigya.auth.loginToken.get(a.params.APIKey))):f()}}):f()}else!gigya.partnerSettings.ssoKey||"logout"!=c&&"/accounts.logout"!=c&&"deleteAccount"!=c||0!=b.errorCode?e():(gigya.external.backplane.resetChannel(),document.location.href!=gigya.partnerSettings.ssoLogoutUrl&&
gigya.utils.SSO.logout({callback:function(a){n.logoutFromProviders(a.logoutURLs,e,{UID:b.UID,UIDSignature:b.UIDSignature,signatureTimestamp:b.signatureTimestamp})}}))}},onSessionExpired:function(a){return!0==this.params.retryPossible?(this.params.retryPossible=!1,gigya.external.facebook.addPending(this,a),!0):!1},getFormElement:function(a){var b=document.createElement("span");b.innerHTML=['<form accept-charset="UTF-8" id="coreDiv_Form_',this.ifrName,'" method="post" action="',this.params.methodURL?
this.params.methodURL:this.url,"?context="+this.params.context+'" target="',this.ifrName,'">',this.createParamFormElements(),'<input name="utf8" type="hidden" value="&#x2713;" /><input type="submit" value="" /></form>'].join("");var c=gigya.utils.DOM.createElement("iframe",this.ifrName);c.setAttribute("id",this.ifrName);gigya.localInfo.isIE6&&c.setAttribute("src",gigya.thisScript.base+"/wildfire/DO_NOT_DELETE.htm");gigya.utils.DOM.addEventListener(c,"load",function(){gigya.global.JPRequests[a]&&gigya.global.JPRequests[a].loadedFormIFrame(c)});
b.appendChild(c);return b},run:function(a,b){null==a&&this.req&&(a=this.req.rid);var c=!1;this.params.rid&&(a=this.params.rid,delete this.params.rid,c=!0);var e=this.params.methodURL?this.params.methodURL:this.url;if(null==a)if(this.params.noCache)a="R"+(new Date).getTime()+"_"+Math.random();else{var d=gigya.utils.object.clone(this.params),f;for(f in d)0!=f.indexOf("fb_")&&"source"!=f&&"sourceData"!=f||delete d[f];a=gigya.utils.object.getMurmurHash(e+gigya.utils.object.getHash(d))}this.lastSentRequestID=
a;if(-1==this.url.indexOf("socialize.getSavedResponse")){gigya.global.JPRequests[a]||(gigya.global.JPRequests[a]=new gigya.global.JPRequest(a));d=gigya.global.JPRequests[a];d.cmds.push(this);if(d.inProgress)return;d.inProgress=!0}if(null!=this.presetResponse)this.handleResponse(this.presetResponse,a);else{this.addParam("callback","gigya.global.JPCMD.prototype.handleResponse");this.addParam("context",a);this.params.oauth_token?this.addParam("authMode","token"):this.params.login_token&&this.addParam("authMode",
"cookie");d=gigya.utils.keyValue.serialize(this.params);f=0;var g=4096;gigya.localInfo.isIE&&(f=2048);this.params.maxLength&&(f=0,g=this.params.maxLength);if(e.length+1+d.length+f<=g&&!this.params.usePost){var l=this.params.callback,h=a;this.params.saveResponseID&&(h=this.params.saveResponseID);gigya.utils.script.load(e+"?"+d+(c?"#"+(new Date).getTime():""),function(){gigya.utils.functions.callFunction(l,[{context:h,errorCode:500026,errorMessage:"Network_error"}])})}else{this.params.usePost&&delete this.params.usePost;
var n=this;gigya.utils.functions.invokeOnPageLoad(function(){var b=document.getElementById("coreDiv_Forms");null==b&&(b=document.createElement("span"),b.id="coreDiv_Forms",b.style.display="none",gigya.utils.DOM.appendToBody(b));n.addParam("saveResponseID",a);var c=n.getFormElement(a);b.appendChild(c);this.formDiv=c})}}}};gigya.socialize._addUserInfoToEvent=function(a,b,c,e){e=a.user||a.userInfo;null==b&&(b={});null!=e&&(b.user=gigya.utils.object.clone(e),null!=a.isLoggedIn&&(b.user.isLoggedIn=a.isLoggedIn),
null!=a.isSiteUID&&(b.user.isSiteUID=a.isSiteUID),null!=a.iRank&&(b.user.iRank=a.iRank));c&&(gigya.utils.object.extractProperties(a,b,"signature|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID"),null!=b.user&&(b.UID=e.UID,b.isSiteUID=e.isSiteUID));return b};n.handleRESTResponse=function(a,b,c){a.cacheKey&&(0==b.errorCode?gigya.utils.sessionCache.set(a.cacheKey,b):gigya.utils.sessionCache.set(a.cacheKey,null));var e=a.p.originalResponse?a.p.originalResponse:b;b.userInfo&&0!=a.apiName.indexOf("/accounts")&&
("string"==typeof b.userInfo&&(b.userInfo=gigya.utils.JSON.deserialize(b.userInfo)),b.userInfo&&(b=b.userInfo));b.accountInfo&&"string"==typeof b.accountInfo&&(b.accountInfo=gigya.utils.JSON.deserialize(b.accountInfo),b.accountInfo&&(b=gigya.utils.object.merge([b.accountInfo,b]),delete b.accountInfo));n.checkCompleteRegistration(b,a.c);delete b.statusCode;delete b.statusReason;b.hasOwnProperty("errorCode")||(b.errorCode=0);b.hasOwnProperty("status")||(b.status=0==b.errorCode?"OK":"FAIL");b.hasOwnProperty("errorMessage")||
(b.errorMessage="");b.hasOwnProperty("statusMessage")||(b.statusMessage=b.errorMessage);var d={status:"OK",statusMessage:"",errorCode:0,statusCode:0,errorMessage:"",errorDetails:"",statusReason:""};if(403005==b.errorCode&&c)switch(a.apiName){case "setUserSettings":n.setGigyaSettings(a.p.group,a.p.settings);b=d;break;case "delUserSettings":n.delGigyaSettings(a.p.group);b=d;break;case "getUserSettings":var f=n.getGigyaSettings(a.p.group);b=d;b.settings=f;break;case "/accounts.logout":case "logout":b=
d}if(0==b.errorCode){switch(a.apiName){case "postComment":if(b.comment)try{b.comment=gigya.utils.JSON.deserialize(b.comment)}catch(g){}break;case "/gm.getTopUsers":if(gigya.localInfo.isIE)for(d=0;d<b.users.length;d++)f=b.users[d],f.photoURL&&-1!=f.photoURL.indexOf("apis.live.net")&&(f.photoURL=f.photoURL.replace("https://apis.live.net",document.location.protocol+"//msnproxy.gigya.com"));break;case "notifyLogin":case "addConnection":case "/accounts.linkAccounts":case "/accounts.finalizeRegistration":case "/accounts.login":case "/accounts.register":case "/accounts.socialLogin":case "login":case "getUserInfo":"isLoggedIn"==
a.operation?(f=b,b={loggedIn:gigya.utils.validation.isExplicitTrue(f.isLoggedIn)},gigya.utils.object.extractProperties(f,b,"status|statusMessage|callId|errorCode|errorMessage|errorDetails|context")):b.authCode||"notifyLogin"==a.apiName&&a.c.authCode||(f=b,b.userInfo&&(f=b.userInfo,delete b.userInfo),-1==a.apiName.indexOf("/accounts")?(b={user:f},gigya.utils.object.extractProperties(f,b,"status|statusMessage|callId|errorCode|errorMessage|errorDetails|settings|context|UIDSig|timestamp|UIDSignature|signatureTimestamp|UID|profile|data"),
b.user.hasOwnProperty("UIDSig")&&(b.signature=b.user.UIDSig),f.profile&&delete f.profile,f.data&&delete f.data,delete f.status,delete f.statusMessage,delete f.callId,delete f.errorCode,delete f.errorMessage,delete f.errorDetails,delete f.settings,delete f.context):b!=f&&(b.user=f),""==f.age||isNaN(parseInt(f.age))||(f.age=parseInt(f.age)),(d=f.capabilities)||(d=""),"object"!=typeof f.capabilities&&(f.capabilities={}),d=d.toLowerCase(),f.capabilities={actions:-1<d.indexOf("actions"),friends:-1<d.indexOf("friends"),
login:-1<d.indexOf("login"),status:-1<d.indexOf("status"),notifications:-1<d.indexOf("notifications"),contacts:-1<d.indexOf("contacts"),photos:-1<d.indexOf("photos")},n.convertIdentitiesArrayToObject(f),"string"==typeof f.providers&&(f.providers=f.providers.split(",")),a.p.group&&!b.settings&&(f=n.getGigyaSettings(a.p.group),b.settings=f));break;case "getAvailableProviders":f={};for(d=0;d<b.availableProviders.length;d++)f[b.availableProviders[d].name]=b.availableProviders[d];b.availableProviders=
f;break;case "unlinkAccounts":case "deleteAccount":case "/accounts.logout":case "logout":gigya.auth.loginToken.remove(a.c.APIKey)}n.handleSpecialFields(b)}n.saveTokenFromResult(e,a.c.APIKey,a.c.legacyCrossSiteMethod);n.saveTokenFromResult(b,a.c.APIKey,a.c.legacyCrossSiteMethod);0!=b.errorCode||!c&&"/accounts.login"!=a.operation&&"notifyLogin"!=a.operation&&"/accounts.finalizeRegistration"!=a.operation&&"/accounts.register"!=a.operation||gigya.utils.cookie.remove("_gigRefUid_"+(a.c.APIKey||gigya.thisScript.APIKey));
switch(a.apiName){case "removeConnection":case "disconnect":if(0==b.errorCode){gigya.socialize.getUserInfo(a.p,{getUserInfoFor:a.operation,_operation:a.operation,originalResponse:e});return}}403005==b.errorCode&&"getUserInfo"==a.apiName&&(b.status="OK",b.statusMessage="",b.errorCode=0,b.statusCode=0,b.errorMessage="",b.errorDetails="",b.statusReason="",b.user={UID:"",nickname:"",photoURL:"",thumbnailURL:"",isSiteUID:!1,birthDay:0,birthMonth:0,birthYear:0,gender:"",email:"",proxiedEmail:"",country:"",
state:"",city:"",zip:"",firstName:"",lastName:"",profileURL:"",age:"",isLoggedIn:!1,isConnected:!1,isSiteUser:!1,providers:[],identities:{},timestamp:"",UIDSig:"",UIDSignature:"",signatureTimestamp:"",loginProvider:"",loginProviderUID:"",capabilities:{actions:!1,friends:!1,login:!1,status:!1,notifications:!1,contacts:!1,photos:!1}},a.p.group&&n.getGigyaSettings(a.p.group));try{b.settings&&"string"==typeof b.settings&&(b.settings=gigya.utils.JSON.deserialize(b.settings))}catch(l){}null!=a.context?
b.context=a.context:delete b.context;delete a.p._operation;delete a.p.originalResponse;b.requestParams=a.p;b.requestParams&&b.requestParams.password&&delete b.requestParams.password;b.operation=a.operation;var h=function(){a.cbCalled=!0;n.generateEventsFromResponse(b,a,e);"function"==typeof a.callback&&(gigya.log.log("Calling callback for "+a.operation+" with this response object",b),a.callback(b))};c=a.p.forceProvidersLogout;var p;b.connectedProviders?p=b.connectedProviders.toLowerCase():a.p.provider&&
(p=a.p.provider.toLowerCase());"logout"!=a.operation&&"/accounts.logout"!=a.operation&&"removeConnection"!=a.operation&&"deleteAccount"!=a.operation||!p||gigya.utils.validation.isExplicitFalse(c)?b.login_token||b.sessionInfo?gigya.utils.SSO.setGroupTokenFromResponse(b,h,a.c.legacyCrossSiteMethod):e.login_token||e.sessionInfo?gigya.utils.SSO.setGroupTokenFromResponse(e,h,a.c.legacyCrossSiteMethod):h():(c=function(){a.cbCalled||h()},window.setTimeout(c,5E3),n.logoutFromProviders(p,c))};n.logoutFromProviders=
function(a,b,c){var e=a.split(","),d=0;for(a=0;a<e.length;a++){var f=e[a],g,l=!1,h=!1,n=!0,k=function(){d++;d==e.length&&("facebook"==f&&gigya.external.facebook.refreshSession(),b())};switch(f){case "facebook":gigya.fbAppID&&(gigya.socialize.waitForService({service:"facebook",callback:function(){gigya.external.facebook.isLoggedIn&&FB.logout?FB.logout(k):k()}}),h=!0);break;case "yahoo":g="https://login.yahoo.com/config/login?.src=fpctx&amp;logout=1&r=";break;case "google":g="https"==gigya.thisScript.protocol?
"https://google.com/accounts/Logout?r=1":"https://www.google.com/accounts/Logout?r=";l=!0;break;case "linkedin":g="https://www.linkedin.com/secure/login?session_full_logout=&trk=hb_signout&r=";break;default:0==f.indexOf("http")&&(0==f.indexOf("https://")&&"https:"==document.location.protocol||"http:"==document.location.protocol)?(g=f,l=!0,n=!1):g=""}if(g&&""!=g){n&&(g+=(new Date).getTime());c&&(g+=(-1!=g.indexOf("?")?"&":"?")+gigya.utils.keyValue.serialize(c,"&"));var q;if(l){var m=document.createElement("iframe");
m.style.width="30px";m.style.height="10px";m.style.position="absolute";m.style.top="-1000px";m.style.left="-1000px";q=function(a){var b;b=a&&a.srcElement?a.srcElement:a&&a.target?a.target:this;!b.loaded&&b.parentNode&&(b.loaded=!0,k(),window.setTimeout(function(){try{document.body.removeChild(b)}catch(a){}},5E3))};m.addEventListener?(m.addEventListener("load",q,!1),m.addEventListener("error",q,!1)):m.attachEvent&&(m.attachEvent("onload",q),m.attachEvent("onerror",q),m.onerror=m.onload=m.onreadystatechange=
function(a){m.readyState&&"loaded"!=m.readyState&&"complete"!=m.readyState||q(a)},m.onerror=q);m.src=g;gigya.utils.DOM.appendToBody(m)}else l=new Image,q=function(){this.loaded||(this.loaded=!0,k())},l.onload=q,l.onerror=q,l.src=g}else h||k()}};gigya.socialize.sendRequest=function(a,b,c,e,d,f){var g;if(-1==a.indexOf("."))g=gigya.utils.stringUtils.format("socialize.{0}",c.p.apiDomain),a=gigya.utils.stringUtils.format("/socialize.{0}",a);else{"/"==a.substr(0,1)&&(a=a.substr(1));var l=a.split(".");g=
gigya.utils.stringUtils.format("{0}.{1}",l[0],c.p.apiDomain);"chat"==l[0]&&gigya.gaeDomain&&(g=gigya.gaeDomain);a="/"+a}g=new gigya.global.JPCMD((f?"http://":"https://")+g+a);g.addParam("format","jsonp");g.addParam("sdk",gigya.getVersion());g.useHTTP=f;b="object"==typeof b&&b.constructor==Array?b:[b];null!=d&&null!=d.presetResponse&&(g.presetResponse=d.presetResponse);for(d=0;d<b.length;d++){f=b[d];for(var h in f)null!=h&&f.hasOwnProperty(h)&&("context"==h?g.context=f[h]:"presetResponse"==h?g.presetResponse=
f[h]:"callback"==h?g.callback=f[h]:"function"!=typeof f[h]&&("undefined"!=typeof f[h]&&null!=f[h])&&g.addParam(h,f[h]))}"function"==typeof e&&(g.callback=e);null!=c&&(g.context=c);g.run()};(function(){var a=function(a,c,e,d,f,g,l){this.ID=a;this.arDefaultCapabilities=f.split(",");this.displayName=c;this.width=e;this.height=d;this.windowOptions="menubar=0,toolbar=0,resizable=1,scrollbars=1,width="+e+",height="+d;this.explicitOnly=g;this.name=c.toLowerCase().split(" ").join("").split("!").join("").split("+").join("plus");
this.toString=function(){return this.name};if(l)for(n._providerAliases||(n._providerAliases={}),arAliases=l.split("|"),a=0;a<arAliases.length;a++)n._providerAliases[arAliases[a]]=this.name;"messenger"==this.name&&(this.displayName="Microsoft");"customopenid"==this.name&&(this.displayName="OpenID")};n._arProviders=[new a(64,"Facebook",650,400,"login,friends,actions,status,photos,places,checkins"),new a(9012,"Twitter",800,440,"login,friends,notifications,actions,status,places,checkins"),new a(9811,
"Google",410,450,"login,contacts"),new a(72,"Google+",560,600,"login",!0),new a(9042,"LinkedIn",865,450,"login,friends,status,actions,notifications"),new a(9803,"Yahoo",500,567,"login,friends,contacts,notifications"),new a(1047,"Messenger",380,540,"login,friends,status,notifications",!1,"messenger|microsoft"),new a(9832,"Instagram",440,420,"login,photos"),new a(9222,"Odnoklassniki",888,425,"login"),new a(9003,"Digg",730,590,"login",!0),new a(9007,"FourSquare",1E3,650,"login,friends,places,checkins"),
new a(9809,"Orkut",610,510,"login,friends,status,actions,photos"),new a(8191,"Renren",450,350,"login,friends,status,actions"),new a(8203,"QQ",570,460,"login,actions"),new a(9821,"Sina",640,380,"login,status,actions"),new a(4228,"Mixi",1E3,720,"login,friends,actions,photos",!0),new a(9830,"Yahoo! JAPAN",980,700,"login,friends,actions",!0),new a(8205,"Spiceworks",640,380,"login",!0),new a(8190,"Kaixin",610,510,"login,friends"),new a(9041,"VKontakte",610,510,"login,friends,photos,status,actions"),new a(9800,
"AOL",530,720,"login"),new a(4096,"WordPress",700,540,"login"),new a(256,"Blogger",760,400,"login"),new a(1041,"Hyves",700,540,"login"),new a(16,"LiveJournal",670,360,"login"),new a(1043,"VeriSign",940,500,"login"),new a(1024,"Typepad",730,590,"login"),new a(4120,"OpenID",730,590,"login"),new a(4218,"Netlog",730,590,"login",!0),new a(4222,"SignOn",870,900,"login",!0),new a(4224,"Orange France",730,590,"login",!0),new a(5002,"Livedoor",970,700,"login",!0),new a(8202,"VZnet",610,510,"login"),new a(9216,
"Skyrock",610,510,"login,friends,status",!0),new a(5004,"Fox News",730,590,"login",!0),new a(1051,"PayPal",400,550,"login",!0),new a(9058,"Amazon",785,510,"login",!0),new a(9219,"Xing",785,510,"login,friends",!0),new a(4121,"Custom OpenID",730,590,"login",!0),new a(6002,"Site",730,590,"",!0)]})();gigya.socialize.replaceProviderAliases=function(a){a=a.split(",");for(var b=0;b<a.length;b++){var c=a[b];n._providerAliases[c]&&(a[b]=n._providerAliases[c])}return a.join(",")};gigya.socialize._getProviderByName=
function(a,b){null==b&&(b=n._arProviders);for(var c=0;c<b.length;c++)if(b[c].name.toLowerCase()==a.toLowerCase())return b[c]};gigya.socialize._getProviderByID=function(a,b){null==b&&(b=n._arProviders);for(var c=0;c<b.length;c++)if(b[c].ID==a)return b[c]};gigya.socialize.hideProvidersByName=function(a,b,c){b=b.toLowerCase();b=b.split(" ").join("").toLowerCase().split(",");b=this.replaceWildcard(b,c);for(c=0;c<b.length;c++)for(var e=0;e<a.length;e++){var d=a[e];(d=d.name||d.toString())&&(d=d.toLowerCase());
d==b[c]&&a.splice(e,1)}return a};gigya.socialize.getProvidersForRequiredCapabilities=function(a,b){null==b&&(b=[]);for(var c=[],e=0;e<a.length;e++){for(var d=a[e],f=!0,g=0;g<b.length;g++){for(var l=!1,h=0;h<d.arDefaultCapabilities.length;h++)if(d.arDefaultCapabilities[h].toLowerCase()==b[g].toLowerCase()){l=!0;break}if(!l){f=!1;break}}f&&c.push(d)}return c};gigya.socialize.getAllProviders=function(){return n._arProviders.concat()};gigya.socialize.getProvidersByName=function(a,b){a=(""+a).split(" ").join("").toLowerCase();
for(var c=(""+a).split(","),c=this.replaceWildcard(c,b),e=[],d=0;d<c.length;d++){var f=gigya.socialize._getProviderByName(c[d],b);null!=f&&e.push(f)}return e};gigya.socialize.replaceWildcard=function(a,b){b||(b=n._arProviders);for(var c=[],e=0;e<a.length;e++)if("*"==a[e])for(var d=0;d<b.length;d++){for(var f=!1,g=0;g<a.length;g++)a[g].toLowerCase()==b[d].name.toLowerCase()&&(f=!0);f||b[d].explicitOnly||c.push(b[d].name)}else c.push(a[e]);return c};(function(){for(var a=function(a,b,c,d,e,k,q){this.name=
a;this.type=b;this.needsAuth=gigya.utils.validation.isExplicitTrue(c);this.replacedBy=e;this.namespace="socialize";this.secureOnly=q;this.fnPreprocessor=k;-1!=a.indexOf(".")&&(this.namespace=a.substr(0,a.indexOf(".")),this.name=a.substr(a.indexOf(".")+1));if(a=n.APIParamSchema.common+"|"+d){a=a.split("|");for(b=0;b<a.length;b++)if(c=a[b],-1!=c.toLowerCase().indexOf("[providercapability=")){d=c.toLowerCase().split("=")[1].split("]")[0];c=c.split("]")[1];d=gigya.socialize.getProvidersForRequiredCapabilities(gigya.socialize.getProvidersByName("*"),
[d]);e=[];for(k=0;k<d.length;k++)e.push(d[k].name+c);a[b]=e.join("|")}a=a.join("|")}else a=void 0;this.schema=a;gigya._methods||(gigya._methods={});gigya._methods[this.namespace]||(gigya._methods[this.namespace]={});gigya._methods[this.namespace][this.name]=this},b=function(a,b,c,d,e,k,n,m,s){this.type=3;this.name=a;this.pluginName=b;this.allowPopup=c;this.defaultParams=d;this.defaultPopupParams=e;this.requiredParams=n;this.dontLoadPluginsCore=m;this.ignoreContainerID=s;this.namespace="socialize";
-1!=a.indexOf(".")&&(this.namespace=a.substr(0,a.indexOf(".")),this.name=a.substr(a.indexOf(".")+1));this.fnValidation=k},c=function(a){var b=a.name;"socialize"!=a.namespace&&(b="/"+a.namespace+"."+a.name);if(0==a.type)return function(){var c={},d=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]);n.prepareParameters(d);d.neverTryGAC||gigya.auth.loginToken.setFromGAC();if(gigya.callsQueue.isActive("API"))gigya.callsQueue.waitFor("API",gigya[a.namespace?a.namespace:"socialize"][a.name],
arguments);else if(!gigya.external.backplane.isLoaded()||gigya.external.backplane._ready||"login"!=a.name&&"notifyLogin"!=a.name&&"linkAccounts"!=a.name&&"register"!=a.name&&"finalizeRegistration"!=a.name)if(!gigya.callsQueue.isActive("backplane")||"login"!=a.name&&"login"!=a.name&&"login"!=a.name&&"login"!=a.name){var e={context:d.context,callback:d.callback,p:d,c:d,i:d,apiName:b,oApi:a};"logout"==a.name&&(gigya.partnerSettings.ssoLogoutUrl&&document.location.href==gigya.partnerSettings.ssoLogoutUrl)&&
(c={_operation:d._operation,presetResponse:{context:e,status:"OK",statusMessage:"",errorCode:0,errorMessage:"",dontTryAgain:!0}});1!=a.needsAuth||(n.canSendRequest(d)||"accounts"==a.namespace&&d.regToken)||(c="logout"==a.name?{_operation:d._operation,presetResponse:{context:e,status:"OK",statusMessage:"",errorCode:0,errorMessage:"",dontTryAgain:!0}}:{_operation:d._operation,presetResponse:{context:e,status:"FAIL",statusMessage:"Unauthorized user",errorCode:403005,errorMessage:"Unauthorized user",
dontTryAgain:!0}});"login"!=a.name&&"notifyLogin"!=a.name&&"initRegistration"!=a.name||gigya.auth.loginToken.remove(d.APIKey);var k=n.getCommonOverridableParams(),q=n.getCommonNonOverridableParams(d.APIKey),m=gigya.utils.object.merge([gigya.thisScript.globalConf,k,d,c]);n.processMergedParams(b,m);k="socialize"==a.namespace?a.name:"/"+a.namespace+"."+a.name;m._operation&&(k=m._operation);e.operation=k;"accounts"==a.namespace&&(gigya.events.global._activeNamespaces.socialize&&null==m.includeUserInfo)&&
(m.includeUserInfo=!0);"getSchema"==a.name&&(m.includeDynamicSchema="clientOnly");m.include=m.include?m.include+",":"profile,data";a.schema&&!c.presetResponse&&(m=gigya.utils.object.extractProperties(m,{},a.schema));m=gigya.utils.object.merge([m,q]);if(m.login_token||"login"==a.name||"register"==a.name||"notifyLogin"==a.name||"initRegistration"==a.name)if(c=gigya.utils.cookie.get("_gigRefUid_"+(d.APIKey||gigya.thisScript.APIKey)))m.refUID=c;a.fnPreprocessor&&a.fnPreprocessor(m);gigya.log.logCall(a.name,
m,d.lastSource);var s="http"==gigya.thisScript.protocol&&!gigya.auth.oAuthToken.get(d)&&0==a.needsAuth&&!m.regToken&&!gigya.auth.loginToken.get(d.APIKey)&&!a.secureOnly;if(m.password||m.oldPassword||m.newPassword)m.usePost=!0;d.cacheTimeout&&!m.presetResponse?(c=k+"_"+gigya.utils.object.getHash(m),e.cacheKey=c,gigya.utils.sessionCache.get(c,d.cacheTimeout,function(a){a&&(m.presetResponse=a,delete e.cacheKey);gigya.socialize.sendRequest(b,m,e,n.handleRESTResponse,null,s)})):gigya.socialize.sendRequest(b,
m,e,n.handleRESTResponse,null,s)}else gigya.callsQueue.waitFor("backplane",gigya[a.namespace?a.namespace:"socialize"][a.name],arguments);else{var r=this,u=arguments;gigya.external.backplane.executeOnInit(function(){gigya[a.namespace?a.namespace:"socialize"][a.name].apply(r,u)})}};if(3==a.type)return function(){var b=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]);n.prepareParameters(b);a.fnValidation&&!a.fnValidation(b)||n.showUI(a.pluginName,a.name,b,a.allowPopup,a.defaultParams,
a.defaultPopupParams,a.requiredParams,a.dontLoadPluginsCore,a.ignoreContainerID)};if(4==a.type)return function(){var c=gigya.utils.object.merge([gigya.thisScript.globalConf,arguments]);n.prepareParameters(c);c._operation=b;this[a.replacedBy](c)}},e=function(a){gigya.auth.loginToken.remove(a.APIKey)},a=[new a("getAvailableProviders",0,0,"enabledProviders|disabledProviders|requiredCapabilities"),new a("notifyLogin",0,0,"siteUID|UIDTimestamp|UIDSig|UIDNonce|provider|authToken|tokenSecret|tokenExpiration|sessionHandle|sessionHandleExpiration|userInfo|providerSessions|sessionExpiration|authCode|includeAllIdentitiesincludeiRank|group|settings|extraFields|signIDs|newUser|actionAttributes|profileAttributes|bp_channel_url",
null,e,!0),new a("shortenURL",0,0,"URL"),new a("convertAction",0,0,"userAction|[providerCapability=actions]UserAction|provider"),new a("getReactionsCount",0,0,"barID|buttonIDs|reportLoad"),new a("incrementReactionsCount",0,0,"barID|buttonID|count|actionAttributes|profileAttributes"),new a("deleteAccount",0,1,[]),new a("delUserSettings",0,1,"group|settings"),new a("getAlbums",0,1,"type|enabledProviders|disabledProviders"),new a("getContacts",0,1,"enabledProviders|disabledProviders"),new a("getFriendsInfo",
0,1,"enabledProviders|disabledProviders|detailLevel|UIDs|siteUsersOnly|requiredCapabilities|signIDs"),new a("getPhotos",0,1,"enabledProviders|disabledProviders|albumIDs|tags"),new a("getRawData",0,1,"provider|UID|fields|dataFormat"),new a("getSessionInfo",0,1,"provider|paddingMode|encrypt|signIDs|encryptAll"),new a("getUserInfo",0,1,"enabledProviders|disabledProviders|signIDs|includeiRank|includeAllIdentities|extraFields|group|settings|includeOpenidUID"),new a("getUserSettings",0,1,"group|settings"),
new a("getPlaces",0,1,"enabledProviders|disabledProviders|latitude|longitude|query|radius|unifyResults"),new a("checkin",0,1,"enabledProviders|disabledProviders|placeID|comment|latitude|longitude|actionAttributes|profileAttributes"),new a("logout",0,1,"signIDs",null,function(a){gigya.partnerSettings.ssoKey&&(a.signIDs=!0)}),new a("notifyRegistration",0,1,"siteUID|UIDTimestamp|UIDSig"),new a("publishUserAction",0,1,"userAction|[providerCapability=actions]UserAction|enabledProviders|disabledProviders|target|shortURLs|scope|privacy|feedID|userLocation|tags|actionAttributes|profileAttributes"),
new a("removeConnection",0,1,"provider"),new a("sendNotification",0,1,"recipients|body|subject|shortURLs|actionAttributes|profileAttributes"),new a("setStatus",0,1,"shortURLs|status|[providerCapability=status]Status|enabledProviders|disabledProviders|userLocation|actionAttributes|profileAttributes"),new a("setUID",0,1,"siteUID|UIDTimestamp|UIDSig"),new a("setUserSettings",0,1,"group|settings"),new a("unlinkAccounts",0,1,[]),new a("getFeed",0,0,"feedID|startTS|endTS|groups|limit|includeUID"),new a("sendEmail",
0,0,"dontSendEmail|companyName|lang|emails|emailSubject|emailBody|linkBack|senderEmail|senderName|userMsg|shortURLs|userAction|[providerCapability=actions]UserAction|actionAttributes|profileAttributes|captchaTicket",null,null,!0),new a("facebookGraphOperation",0,0,"graphPath|graphParams|authRequired|method|authType"),new a("getTopShares",0,0,"age|tag|limit"),new a("notifySSOLogin",0,0,"bp_channel_url"),new b("showLoginUI","login",!0,{width:120,height:110},{width:280,height:220}),new b("showAddConnectionsUI",
"login",!0,{width:110,height:65},{width:250,height:200}),new b("showFriendSelectorUI","friendSelector",!0,{width:400,height:360}),new b("showFeedUI","newsfeed",!1,{width:304,height:265}),new b("chat.showChatUI","chat.chat",!1,{width:300,height:450},null,function(a){a.site&&(a.categoryID=a.site);a.stream&&(a.streamID=a.stream);a.skin&&(a.skinID=a.skin);a.streamID=a.streamID||0;return!0}),new b("showEditConnectionsUI","edit",!0,{width:310,height:250},{width:310,height:310}),new b("showShareBarUI","reactions",
!1,{shareCountCacheTimeout:3E5},null,null,"userAction|shareButtons"),new b("showReactionsBarUI","reactions",!1,null,null,function(a){a.barID||(a.barID=a.itemID);return!0},"userAction|barID|reactions"),new b("showMiniShareUI","minishare",!0,{width:320,height:153}),new b("showFollowBarUI","followbar",!1,null,null,null,"buttons"),new b("showBookmarkUI","bookmark",!0,{width:310,height:250},{width:310,height:310}),new b("showSimpleShareUI","simpleShare",!0,{width:280,height:175},null,null,"userAction",
!0,!0),new b("showShareMobileUI","shareMobile",!0,{},{},null,"userAction"),new b("gm.showUserStatusUI","gm.userStatus",!1,{width:300},null,function(a){return n.canSendRequest(a)}),new b("gm.showAchievementsUI","gm.achievements",!1,{width:300,height:100,excludeChallenges:"_default"}),new b("gm.showChallengeStatusUI","gm.achievements",!1,{width:300,height:100,challenge:"_default"}),new b("gm.showLeaderboardUI","gm.leaderboard",!1,{width:300},null,function(a){a&&a.height&&(a.height=null);return!0}),
new b("accounts.showScreenSet","accounts.screenSet",!0,{},{}),new b("accounts.hideScreenSet","accounts.screenSet",!0,{},{}),new b("accounts.switchScreen","accounts.screenSet",!0,{needsContainer:!1},{needsContainer:!1}),new a("connect",4,null,null,"addConnection"),new a("disconnect",4,null,null,"removeConnection"),new a("linkAccounts",4,null,null,"setUID"),new a("showConnectUI",4,null,null,"showAddConnectionsUI"),new a("showNewsfeedUI",4,null,null,"showFeedUI"),new a("isLoggedIn",4,null,null,"getUserInfo"),
new a("gm.getChallengeStatus",0,0,"UID|includeChallenges|excludeChallenges|details|lang|actionAttributes|profileAttributes"),new a("gm.resetLevelStatus",0,1,"challenges|actionAttributes|profileAttributes"),new a("gm.getTopUsers",0,0,"challenge|totalCount|friendsCount|includeSelf|period|lang|actionAttributes|profileAttributes"),new a("gm.getChallengeConfig",0,0,"UID|includeChallenges|excludeChallenges|lang|actionAttributes|profileAttributes|expandActions"),new a("gm.notifyAction",0,1,"action|operation|challengeIDs|actionAttributes|profileAttributes"),
new b("comments.showRatingUI","comments.rating",!1),new a("comments.postComment",0,0,"categoryID|streamID|parentID|guestName|guestEmail|commentText|privacy|feedID|userAction|UserAction|scope|enabledProviders|disabledProviders|shortURLs|commentTitle|ratings|tags|streamTags|actionAttributes|profileAttributes"),new a("comments.getComments",0,0,"categoryID|streamID|includeSettings|start|startTS|threadLimit|sort|threaded|threadDepth|includeStreamInfo|includeOpenidUID|includeUID|includeReplies|tags|dataFormat|includeUserOptions|includeUserComments|includeRatingsDims"),
new a("comments.setStreamInfo",0,0,"categoryID|streamID|streamTitle|streamURL|streamInfoSig|streamTags"),new a("comments.getTopStreams",0,0,"categoryID|limit|maxStreamAge|includeLastComment|streamTag|minRatingCount"),new a("comments.getTopRatedStreams",0,0,"categoryID|limit|maxStreamAge|ratingClass|minRatingCount|streamTag"),new a("comments.getStreamInfo",0,0,"categoryID|streamID|streamIDs|includeLastComment|includeRatingsDims"),new a("comments.flagComment",0,0,"categoryID|streamID|commentID|actionAttributes|profileAttributes"),
new a("comments.vote",0,1,"categoryID|streamID|commentID|vote|actionAttributes|profileAttributes"),new a("comments.getUserVotes",0,1,"categoryID|streamID"),new a("comments.getUserComments",0,1,"categoryID|streamID|tag|senderUID|start|limit|sort|includeReplies|includeStreamInfo"),new a("comments.getFriendsComments",0,1,"categoryID|streamID|start|limit|includeUID|sort|includeReplies|includeStreamInfo"),new a("comments.getThread",0,0,"categoryID|streamID|commentID|start|includeUID|limit|threadDepth|sort"),
new a("comments.deleteComment",0,1,"categoryID|streamID|commentID"),new a("comments.subscribe",0,0,"categoryID|streamID|email|lang"),new a("comments.unsubscribe",0,0,"categoryID|streamID|unsubscribeToken"),new a("comments.setUserOptions",0,1,"replyNotifications|notificationsEmail|notificationsLanguage"),new a("comments.getUserOptions",0,1,"APIKey"),new a("gcs.getUserData",0,1,"type|fields"),new a("gcs.setUserData",0,1,"data|type|updateBehavior"),new a("gcs.search",0,0,"expTime|querySig|query"),new a("gcs.getSchema",
0,0,"schemaType"),new a("chat.getSettings",0,0,"categoryID|streamID|skinID"),new a("chat.getMessages",0,0,"categoryID|streamID|start|includeSettings"),new a("chat.postMessage",0,1,"categoryID|streamID|messageText|isPrivate|actionAttributes|profileAttributes"),new a("chat.resetChat",0,0,"categoryID|streamID|timestamp|chatSignature"),new a("chat.blockUser",0,0,"categoryID|streamID|UID|chatSignature"),new a("chat.deleteMessage",0,0,"categoryID|streamID|messageId|chatSignature"),new a("accounts.login",
0,0,"loginID|password|sessionExpiration|targetEnv|regToken|include|actionAttributes|profileAttributes|includeUserInfo|bp_channel_url",null,e,!0),new a("accounts.linkAccounts",0,0,"loginID|password|sessionExpiration|targetEnv|include|regToken|includeUserInfo|bp_channel_url",null,null,!0),new a("accounts.initRegistration",0,0,"sdk",null,e),new a("accounts.register",0,0,"username|email|password|UID|regToken|siteUID|secretQuestion|secretAnswer|profile|data|captchaText|captchaToken|lang|hashedPassword|pwHashAlgorithm|skipVerification|finalizeRegistration|targetEnv|sessionExpiration|include|actionAttributes|profileAttributes|includeUserInfo|bp_channel_url",
null,null,!0),new a("accounts.finalizeRegistration",0,0,"regToken|targetEnv|include|includeUserInfo|bp_channel_url"),new a("accounts.captchaImage",0,0,"regToken"),new a("accounts.importProfilePhoto",0,0,"regToken|URL|publish"),new a("accounts.resetPassword",0,0,"lang|loginID|passwordResetToken|secretAnswer|securityFields|newPassword|email",null,null,!0),new a("accounts.isAvailableLoginID",0,0,"loginID"),new a("accounts.resendVerificationCode",0,0,"regToken|email"),new a("accounts.getCaptcha",0,0,
""),new a("accounts.getPolicies",0,0,"sections"),new a("accounts.getSchema",0,0,"sections|schemaType"),new a("accounts.getAccountInfo",0,1,"include|extraProfileFields|regToken"),new a("accounts.setAccountInfo",0,1,"profile|data|regToken|oldPassword|password|newPassword|addLoginEmails|removeLoginEmails|username|secretQuestion|secretAnswer",null,null,!0),new a("accounts.logout",0,1,"signIDs",null,function(a){gigya.partnerSettings.ssoKey&&(a.signIDs=!0)}),new a("accounts.search",0,0,"expTime|querySig|query"),
new a("accounts.getScreenSets",0,0,"screenSetIDs|include"),new a("ds.store",0,0,"type|data|oid|updateBehavior"),new a("ds.get",0,0,"type|data|oid|fields"),new a("ds.search",0,0,"expTime|querySig|query"),new a("ds.getSchema",0,0,""),new a("ds.delete",0,0,"type|oid|fields")],b=0;b<a.length;b++){var e=a[b],d="socialize";e.namespace&&(d=e.namespace);gigya[d]||(gigya[d]={});gigya[d][e.name]=c(e)}})();(function(){var a={},b={User:"personwithuid+isLoggedIn|false,isConnected|false,isSiteUser|false,identities|{},providers|[],timestamp,UIDSig,UIDSignature,signatureTimestamp,loginProvider,loginProviderUID,capabilities|{}",
Friend:"personwithuid+timestamp,friendshipSig,friendshipSignature,signatureTimestamp,timestamp,isSiteUser|false,identities|{}",Identity:"person+isExpiredSession|false,allowsLogin|false,providerUID,provider,isLoginIdentity|false,missingPermissions",Contact:"provider,firstName,lastName,nickname,email,photoURL",person:"nickname,photoURL,thumbnailURL,birthDay|0,birthMonth|0,birthYear|0,gender,email,proxiedEmail,country,state,city,hometown,zip,firstName,lastName,profileURL,age|0",personwithuid:"person+UID,isSiteUID|false",
UserAction:"actorUID,actorNickname,actionName,date|new Date(),targets|[],images|[],actionData1,actionData2,iconURL,title,linkBack,userMessage,description,actionLinks|[],mediaItems|[],subtitle"},c=function(a){var d={};a=b[a];-1!=a.indexOf("+")&&(d=c(a.split("+")[0]),a=a.split("+")[1]);arFields=a.split(",");for(a=0;a<arFields.length;a++){var e="",h=arFields[a].split("|");if(1<h.length)try{e=gigya.utils.JSON.deserialize(h[1])}catch(n){}d[h[0]]=e}return d},e=function(b){return function(c){var d=a[b],
e;for(e in d)this[e]=gigya.utils.object.clone(d[e]);if("object"==typeof c)for(e in c)"function"!=typeof c[e]&&(this[e]=gigya.utils.object.clone(c[e]))}},d;for(d in b)a[d]=c(d),gigya.socialize[d]=e(d);gigya.socialize.Collection=function(a,b){this.arr=a;this._key=b?b:""};gigya.socialize.Collection.prototype={asArray:function(){return this.arr},each:function(a){for(var b=0,c=this.arr[b];c;)a(c,b),b++,c=this.arr[b]},getById:function(a){"undefined"==typeof this._hash&&this._buildHash();return(this._hash?
this._hash:this.arr)[a]},getSize:function(){return this.arr.length},_buildHash:function(){var a=this._hash={},b=this._key;this.each(function(c,d){a["function"==typeof c[b]?c[b]():c[b]]=c})}};gigya.socialize.UserAction.prototype={clone:function(){return new gigya.socialize.UserAction(gigya.utils.object.clone(this,!0,!0))},getTemplate:function(){return this.titleTemplate},setTemplate:function(a){this.titleTemplate=a},getActor:function(a){return{UID:this.actorUID,nickname:this.actorNickname}},setActionName:function(a){this.actionName=
a;return this},getActionName:function(a){return this.actionName},getTemplateFields:function(){var a=[],b;for(b in this.templateFields)a.push(this.templateFields[b]);return new gigya.socialize.Collection(a,"fieldName")},setTemplateField:function(a,b,c){this.templateFields[a]={fieldName:a,text:b,href:c};return this},getTemplateField:function(a){return this.templateFields[a]?this.templateFields[a]:null},addTarget:function(a){if("object"==typeof a)return this.targets.push({UID:a.UID,nickname:a.nickname?
a.nickname:""}),this;if("string"==typeof a)return this.targets.push({UID:a,nickname:""}),this},addActionLink:function(a,b){this.actionLinks.push({text:a,href:b?b:""});return this},addMediaItem:function(a){this.mediaItems.push(a);return this},setTitle:function(a){a&&(this.title=a);return this},setLinkBack:function(a){a&&a.toString&&(a=a.toString());a&&(this.linkBack=a);return this},setUserMessage:function(a){this.userMessage=a?a:"";return this},setDescription:function(a){this.description=a?a:"";return this},
addImage:function(a,b){this.addMediaItem({type:"image",src:a,href:b})},getImages:function(){return new gigya.socialize.Collection(this.images,"")},getTargets:function(){return new gigya.socialize.Collection(this.targets,"UID")},setIconURL:function(a){this.iconURL=a;return this},getIconURL:function(){return this.iconURL},getDate:function(){return this.date},setActionData1:function(a){this.actionData1=a;return this},getActionData1:function(a){return this.actionData1},setActionData2:function(a){this.actionData2=
a;return this},getActionData2:function(a){return this.actionData2},setSubtitle:function(a){this.subtitle=a;return this},getSubtitle:function(){return this.subtitle}}})();gigya.attachPlugin=function(a,b,c,e){b||(b="socialize");gigya[b]||(gigya[b]={});gigya[b].plugins||(gigya[b].plugins={});gigya[b].plugins[c]||(gigya[b].plugins[c]={instances:[]});var d=gigya[b].plugins[c];d[e]||(d[e]=function(e){e=new a(e,"gigya."+b+".plugins."+c+".instances["+d.instances.length+"]");d.instances.push(e)})};gigya.socialize.addEventHandlers({listenerType:"component"},
{onFacebookLoaded:function(){gigya.external.facebook.retryPending()},onFBCRefreshed:function(){gigya.external.facebook.retryPending()}});gigya.utils.functions.makePublic("gigya.socialize.showChatUI",gigya.chat.showChatUI);gigya.utils.functions.makePublic("gigya.socialize.showCommentsUI",gigya.comments.showCommentsUI);gigya.utils.functions.makePublic("gigya.socialize.showRatingUI",gigya.comments.showRatingUI);gigya.utils.functions.makePublic("gigya.services.socialize",gigya.socialize);gigya.utils.functions.makePublic("gigya.services.gcs",
gigya.gcs);gigya.utils.functions.makePublic("gigya.services.gm",gigya.gm);gigya.utils.functions.makePublic("gigya.services.comments",gigya.comments);gigya.utils.functions.makePublic("gigya.services.accounts",gigya.accounts);gigya.utils.functions.makePublic("gigya.services.accounts",gigya.accounts);gigya.utils.functions.makePublic("gigya._getLoggingStatus",gigya.log._isEnabled);gigya.callsQueue.queueForExecution("API",function(){gigya.auth.loginToken.migrateExisting();gigya.reports.trackAddressBarShares();
if(gigya.thisScript.APIKey){var a=!1;if(gigya.localInfo.isSafari)try{window.localStorage.setItem("gigTest","1"),window.localStorage.removeItem("gigTest")}catch(b){b.code===DOMException.QUOTA_EXCEEDED_ERR&&0===window.localStorage.length&&(a=!0)}if(gigya.localInfo.supportsLocalStorage&&"1"!=gigya.utils.cookie.get("gig3pc")&&!a){gigya.global._onIDs=function(a){a&&(a.data&&a.data.indexOf)&&(-1!=a.data.indexOf("gig3pc=true")?(gigya.utils.cookie.set("gig3pc","1",172800,gigya.partnerSettings.baseDomain),
gigya.callsQueue.release("gigIDs","API"),gigya.callsQueue.release("gigIDs","UI")):0==a.data.indexOf("gcid=")&&(a=gigya.utils.keyValue.deserialize(a.data),gigya.log.log("Safari IDs Proxy: Got callback with this response",a),a&&("-1"!=a.gcid&&(gigya.partnerSettings.gcid=a.gcid),"-1"!=a.ucid&&(gigya.partnerSettings.ucid=a.ucid)),gigya.callsQueue.release("gigIDs","API"),gigya.callsQueue.release("gigIDs","UI"),a=gigya.global.ifrGcid,a.parentNode.removeChild(a),delete gigya.global.ifrGcid,gigya.utils.DOM.removeEventListener(window,
"message",gigya.global._onIDs),delete gigya.global._onIDs))};gigya.callsQueue.hold("gigIDs","API");gigya.callsQueue.hold("gigIDs","UI");gigya.utils.DOM.addEventListener(window,"message",gigya.global._onIDs);var c=document.createElement("iframe"),a=document.location.protocol+"//"+document.location.href.split("?")[0].split("#")[0].split("/")[2],e=gigya.partnerSettings.ssoKey||gigya.thisScript.APIKey;c.src="https://cdns.gigya.com/gs/gigIDsProxy.htm?APIKey="+encodeURIComponent(e)+"&domain="+encodeURIComponent(a)+
"&apiDomain="+encodeURIComponent(gigya.partnerSettings.plugins.apiDomain);c.style.width="30px";c.style.height="10px";c.style.position="absolute";c.style.top="-1000px";c.style.left="-1000px";gigya.global.ifrGcid=c;gigya.log.log("Gigya IDs Proxy: Calling getIDs",{apiKey:e,domain:a});document.body?gigya.utils.DOM.appendToBody(c):gigya.utils.functions.invokeOnPageLoad(function(){gigya.utils.DOM.appendToBody(c)})}}gigya.auth.loginToken.setFromGAC();gigya.utils.functions.invokeOnPageLoad(function(){"undefined"!=
typeof gigya_omniture_conf&&gigya.utils.script.load(gigya.thisScript.base+"/js/GenesisExchange_Gigya.min.js")});gigya.reports.report("loadc",gigya.thisScript.APIKey,null,null,null,{sref:document.referrer});gigya.thisScript.APIKey&&gigya.utils.functions.invokeOnPageLoad(function(){window.setTimeout(function(){gigya.socialize.trackReferrals()},1E3)});gigya.partnerSettings.ssoKey&&(gigya.thisScript.APIKey&&!gigya.auth.loginToken.get())&&(gigya.callsQueue.hold("SSO","API"),gigya.utils.SSO.getGroupToken({callback:function(a){gigya.auth.loginToken.setFromSSOResponse(a);
gigya.callsQueue.release("SSO","API")}}));gigya.socialize.waitForService({service:"facebook",callback:function(){var a=gigya.external.facebook.getParams();gigya.thisScript.globalConf.autoLogin&&(a&&a.fb_at&&!gigya.auth.loginToken.get())&&gigya.socialize.notifyLogin({providerSessions:{facebook:{authToken:a.fb_at,tokenExpiresIn:a.fb_exp}}},{context:{eventOnSuccess:{eventName:"login",provider:"facebook"}}})}});gigya.thisScript.globalConf.customEventMap&&gigya.events.addMap(gigya.thisScript.globalConf.customEventMap);
n.checkReturnFromRedirect();"function"==typeof onGigyaServiceReady&&onGigyaServiceReady("socialize")})}();

gigya.fbAppID='144949235546135';gigya.fbcDomain='Gigya.com';gigya.customDomain='wiki-demo.gigya.com';gigya.services.socialize._injectFBC();